(this["webpackJsonppath-generator-app"]=this["webpackJsonppath-generator-app"]||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(79);var n=a(14),r=a(10),o=a(11),i=a(13),s=a(12),c=a(7),l=a.n(c),p=a(15),u=a(6),h=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16.5354,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8.001,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Object(r.a)(this,e),this.widthInMeter=Number(t),this.heightInMeter=Number(a),this.topLeftXPixel=Number(n),this.topLeftYPixel=Number(o),this.widthInPixel=Number(i),this.heigthInPixel=Number(s),this.widthPixelToMeter=0===i?0:t/i,this.hightPixelToMeter=0===s?0:a/s},f=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,e),this.center=Number(n),this.length=Number(a),this.width=Number(t)};function d(e,t){return{type:"SET_WAYPOINT",payload:{waypoint:e,index:t}}}function v(e){return{type:"REMOVE_WAYPOINT",payload:{index:e}}}function m(e,t,a){return{type:"ADD_PATH",payload:{name:e,waypoints:t,isInReverse:a}}}function g(e,t){return{type:"SET_PATH_CONFIG",payload:{pathConfig:e,driveType:t}}}var y=a(18);function b(e){var t=[],a=e.map((function(e,a){return 0===a&&(t=function(e){return Object.keys(e).sort()}(e)),function(e,t){return t.map((function(t){return e[t]})).join(",")+","}(e,t)}));return"".concat(t.join(","),",\n").concat(a.join("\n"))}function P(e){var t=e.coords.map((function(e){return E(e)}));return E()+t.join("\n")}function E(e){return e?"".concat(y.Util.r2d(e.angle),",").concat(e.x,",").concat(e.y,","):"Angle,X,Y,\n"}function j(e){return{type:"CHANGE_RANGE_POSITION",payload:{position:e}}}function w(e){return{type:"SET_DRAW_ROBOT_INTERVAL",payload:{interval:e}}}function C(e){return{type:"CHANGE_POPUPS_STATUS",payload:{popup:e}}}function T(e){return{type:"CHANGE_LISTEN_TO_MOUSE_STATUS",payload:{index:e}}}function O(e){return{type:"SET_FIELD_CONFIG",payload:{fieldConfig:e}}}function S(e,t){return{type:"SET_IMAGE",payload:{imageUrl:e,image:t}}}function R(e){return{type:"SET_ROBOT_DRAW_CONFIG",payload:{robotDrawConfig:e}}}var k=function(){function e(t){Object(r.a)(this,e),this.ipcRenderer=window.require("electron").ipcRenderer,this.fs=window.require("fs"),this.dispatch=t,this.projectPath="",this.load()}return Object(o.a)(e,[{key:"load",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setProjectFolderPath();case 2:this.loadJsonProject(),this.setCSVFolderPath(),this.loadRobotDrawConfig(),this.loadFieldConfig(),this.loadFieldImage(),this.loadPathConfig(),this.loadPaths();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeProjectFolderPath",value:function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ipcRenderer.invoke("UpdateProjctPath",t);case 2:this.load();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setProjectFolderPath",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ipcRenderer.invoke("GetProjctPath");case 2:this.projectPath=e.sent,this.dispatch({type:"SET_PROJECT_PATH",payload:{projectPath:this.projectPath}});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCSVFolderPath",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.jsonProject&&this.jsonProject.saveCSVTo&&this.dispatch({type:"SET_CSV_PATH",payload:{path:this.jsonProject.saveCSVTo}});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadJsonProject",value:function(){try{var e=this.fs.readFileSync("".concat(this.projectPath,"/PathGenerator.json"));this.jsonProject=JSON.parse(e)}catch(t){this.jsonProject=void 0}}},{key:"loadRobotDrawConfig",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new f,this.jsonProject&&this.jsonProject.robotDrawConfig&&(t=Object.assign(new f,this.jsonProject.robotDrawConfig)),this.dispatch(R(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFieldConfig",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new h,this.jsonProject&&this.jsonProject.fieldConfig&&(t=Object.assign(new h,this.jsonProject.fieldConfig)),this.dispatch(O(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFieldImage",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=t||this.jsonProject.image).startsWith("http")){e.next=5;break}return this.dispatch(S(t,t)),e.abrupt("return");case 5:a="",a=-1===t.indexOf("/")?"".concat(this.projectPath,"/").concat(t):t,n=this.fs.readFileSync(a),r=URL.createObjectURL(new Blob([n])),this.dispatch(S(r,t)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.dispatch(S("",""));case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadPathConfig",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.jsonProject.driveType=this.jsonProject.driveType?this.jsonProject.driveType:"tank",t="swerve"===this.jsonProject.driveType?y.Swerve:y.Tank,a=this.jsonProject.pathConfig?this.jsonProject.pathConfig:{},this.dispatch(g(a,t))}catch(n){this.dispatch(g(new y.Tank.PathConfig,y.Tank))}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadPaths",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.readdirSync("".concat(this.projectPath,"/paths")).forEach(function(){var e=Object(p.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.endsWith(".json")&&t.loadPath(a);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadPath",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=this.fs.readFileSync("".concat(this.projectPath,"/paths/").concat(t)),n=JSON.parse(a),this.dispatch(m(t.replace(".json",""),n.waypoints,n.isInReverse))}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveJsonProject",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(a=Object(u.a)({},t)).driveType=t.driveType===y.Swerve?"swerve":"tank",delete a.projectPath,n=JSON.stringify(a),this.fs.existsSync(this.projectPath)||this.fs.mkdirSync(this.projectPath),this.fs.writeFileSync("".concat(this.projectPath,"/PathGenerator.json"),n)}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveJsonPath",value:function(){var e=Object(p.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.existsSync("".concat(this.projectPath,"/paths"))||this.fs.mkdirSync("".concat(this.projectPath,"/paths")),n=JSON.stringify({isInReverse:a.isReverse(),waypoints:a.waypoints}),this.fs.writeFileSync("".concat(this.projectPath,"/paths/").concat(t,".json"),n)}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"saveCSVPath",value:function(){var e=Object(p.a)(l.a.mark((function e(t,a,n){var r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.existsSync(n)||this.fs.mkdirSync(n),this.fs.existsSync("".concat(n,"/").concat(a))&&this.fs.rmdirSync("".concat(n,"/").concat(a),{recursive:!0}),this.fs.mkdirSync("".concat(n,"/").concat(a)),Object.keys(t).filter((function(e){return e.endsWith("Setpoints")})).forEach((function(e){var o="".concat(a,".").concat(e.replace("_","").replace("Setpoints",""),".csv");r.fs.writeFileSync("".concat(n,"/").concat(a,"/").concat(o),b(t[e]))})),this.fs.writeFileSync("".concat(n,"/").concat(a,"/").concat(a,".coords.csv"),P(t)),this.dispatch(C("savePathToCSVPopup"))}catch(o){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"deletePath",value:function(){var e=Object(p.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.unlinkSync("".concat(this.projectPath,"/paths/").concat(t,".json")),this.fs.rmdirSync("".concat(a,"/").concat(t),{recursive:!0})}catch(n){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"renameJsonPath",value:function(){var e=Object(p.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.renameSync("".concat(this.projectPath,"/paths/").concat(t,".json"),"".concat(this.projectPath,"/paths/").concat(a,".json"))}catch(n){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),x=void 0;function I(){return(I=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{x=new k(t)}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{x.changeProjectFolderPath(t)}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){return M.apply(this,arguments)}function M(){return(M=Object(p.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{x.saveJsonPath(t,a)}catch(n){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(p.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{x.deletePath(t,a)}catch(n){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(p.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{x.renameJsonPath(t,a)}catch(n){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{x.saveJsonProject(t)}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{x.loadFieldImage(t)}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(p.a)(l.a.mark((function e(t,a,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{x.saveCSVPath(t,a,n)}catch(r){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return{type:"SET_PLATFORM",payload:{isWeb:e}}}function G(e){return{type:"SET_APP_VERSION",payload:{version:e}}}var H=void 0,B=void 0;function Y(){return(Y=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{H=t,B=window.require("electron").ipcRenderer,H(U(!1)),J(),z()}catch(a){H(U(!0))}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return X.apply(this,arguments)}function X(){return(X=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.invoke("GetAppVersion");case 3:t=e.sent,H(G(t)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function z(){try{B.on("update-downloaded",(function(e,t){H({type:"SET_NEW_VERSION",payload:{version:t.version}})}))}catch(e){}}function q(){try{B.invoke("UpdateApp")}catch(e){}}var $=a(9),K=a(109),Q=a(110),Z=a(73),ee=a(74),te=a(21),ae=a(1),ne=a.n(ae),re=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={id:-1,pathName:void 0,waypointsLength:-1},n.x=ne.a.createRef(),n.y=ne.a.createRef(),n.v=ne.a.createRef(),n.vMax=ne.a.createRef(),n.angle=ne.a.createRef(),n.robotAngle=ne.a.createRef(),n.add=n.add.bind(Object($.a)(n)),n.remove=n.remove.bind(Object($.a)(n)),n.onChange=n.onChange.bind(Object($.a)(n)),n.getValue=n.getValue.bind(Object($.a)(n)),n.isNeedToUpdateState=n.isNeedToUpdateState.bind(Object($.a)(n)),n}return Object(o.a)(a,[{key:"isNeedToUpdateState",value:function(){return this.state.id!==this.props.id||this.state.pathName!==this.props.pathName||this.state.waypointsLength!==this.props.waypointsLength}},{key:"getValue",value:function(e,t){return this.isNeedToUpdateState()?t:e.endsWith(".")?e:t}},{key:"componentDidUpdate",value:function(){var e=this;this.vMax.current.value=this.getValue(this.vMax.current.value,this.props.waypoint.vMax),this.x.current.value=this.getValue(this.x.current.value,this.props.waypoint.x),this.y.current.value=this.getValue(this.y.current.value,this.props.waypoint.y),this.v.current.value=this.getValue(this.v.current.value,this.props.waypoint.v),this.isNeedToUpdateState()&&this.setState((function(){return{id:e.props.id,pathName:e.props.pathName,waypointsLength:e.props.waypointsLength}}))}},{key:"onChange",value:function(){var e={x:Number(this.x.current.value),y:Number(this.y.current.value),v:Number(this.v.current.value),vMax:Number(this.vMax.current.value),angle:Number(this.angle.current.value),robotAngle:Number(this.robotAngle.current.value)};this.props.setWaypoint(e,this.props.id)}},{key:"remove",value:function(){this.props.removeWaypoint(this.props.id)}},{key:"add",value:function(){this.props.changeListenToMouseStatus(this.props.id)}},{key:"render",value:function(){return ne.a.createElement(K.a,{className:this.props.id>0?"mb-0 mt-2":"mb-0 mt-0",variant:"primary"},ne.a.createElement(Q.a,null,ne.a.createElement("span",{className:"mr-4"}," ",this.props.id+1," "),ne.a.createElement(Q.a.Prepend,null,ne.a.createElement(Q.a.Text,null,"X")),ne.a.createElement(Z.a,{className:"mr-2",ref:this.x,defaultValue:this.props.waypoint.x,onChange:this.onChange}),ne.a.createElement(Q.a.Prepend,null,ne.a.createElement(Q.a.Text,null,"Y")),ne.a.createElement(Z.a,{className:"mr-2",ref:this.y,defaultValue:this.props.waypoint.y,onChange:this.onChange}),ne.a.createElement(Q.a.Prepend,null,ne.a.createElement(Q.a.Text,null,"Path Angle")),ne.a.createElement(Z.a,{className:"mr-2",ref:this.angle,defaultValue:this.props.waypoint.angle,onChange:this.onChange}),ne.a.createElement(Q.a.Prepend,null,ne.a.createElement(Q.a.Text,null,"Robot Angle")),ne.a.createElement(Z.a,{className:"mr-2",ref:this.robotAngle,defaultValue:this.props.waypoint.robotAngle,onChange:this.onChange}),ne.a.createElement(Q.a.Prepend,null,ne.a.createElement(Q.a.Text,null,"V")),ne.a.createElement(Z.a,{className:"mr-2",ref:this.v,defaultValue:this.props.waypoint.v,onChange:this.onChange}),ne.a.createElement(Q.a.Prepend,null,ne.a.createElement(Q.a.Text,null,"vMax")),ne.a.createElement(Z.a,{className:"mr-2",ref:this.vMax,defaultValue:this.props.waypoint.vMax,onChange:this.onChange}),ne.a.createElement(ee.a,{className:"mr-2",variant:"danger",onClick:this.remove},ne.a.createElement(te.c,null)),ne.a.createElement(ee.a,{onClick:this.add,variant:this.props.color},ne.a.createElement(te.a,null))))}}]),a}(ne.a.Component),oe=Object(n.b)((function(e){return{pathName:e.selectedPath}}),(function(e){return{changeListenToMouseStatus:function(t){return e(T(t))},setWaypoint:function(t,a){return e(d(t,a))},removeWaypoint:function(t){return e(v(t))}}}))(re),ie=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={id:-1,pathName:void 0,waypointsLength:-1},n.x=ne.a.createRef(),n.y=ne.a.createRef(),n.v=ne.a.createRef(),n.vMax=ne.a.createRef(),n.angle=ne.a.createRef(),n.add=n.add.bind(Object($.a)(n)),n.remove=n.remove.bind(Object($.a)(n)),n.onChange=n.onChange.bind(Object($.a)(n)),n.getValue=n.getValue.bind(Object($.a)(n)),n.isNeedToUpdateState=n.isNeedToUpdateState.bind(Object($.a)(n)),n}return Object(o.a)(a,[{key:"isNeedToUpdateState",value:function(){return this.state.id!==this.props.id||this.state.pathName!==this.props.pathName||this.state.waypointsLength!==this.props.waypointsLength}},{key:"getValue",value:function(e,t){return this.isNeedToUpdateState()?t:e.endsWith(".")?e:t}},{key:"componentDidUpdate",value:function(){var e=this;this.vMax.current.value=this.getValue(this.vMax.current.value,this.props.waypoint.vMax),this.x.current.value=this.getValue(this.x.current.value,this.props.waypoint.x),this.y.current.value=this.getValue(this.y.current.value,this.props.waypoint.y),this.v.current.value=this.getValue(this.v.current.value,this.props.waypoint.v),this.isNeedToUpdateState()&&this.setState((function(){return{id:e.props.id,pathName:e.props.pathName,waypointsLength:e.props.waypointsLength}}))}},{key:"onChange",value:function(){var e={x:Number(this.x.current.value),y:Number(this.y.current.value),v:Number(this.v.current.value),vMax:Number(this.vMax.current.value),angle:Number(this.angle.current.value)};this.props.setWaypoint(e,this.props.id)}},{key:"remove",value:function(){this.props.removeWaypoint(this.props.id)}},{key:"add",value:function(){this.props.changeListenToMouseStatus(this.props.id)}},{key:"render",value:function(){return ne.a.createElement(K.a,{className:this.props.id>0?"mb-0 mt-2":"mb-0 mt-0",variant:"primary"},ne.a.createElement(Q.a,null,ne.a.createElement("span",{className:"mr-4"}," ",this.props.id+1," "),ne.a.createElement(Q.a.Prepend,null,ne.a.createElement(Q.a.Text,null,"X")),ne.a.createElement(Z.a,{className:"mr-2",ref:this.x,defaultValue:this.props.waypoint.x,onChange:this.onChange}),ne.a.createElement(Q.a.Prepend,null,ne.a.createElement(Q.a.Text,null,"Y")),ne.a.createElement(Z.a,{className:"mr-2",ref:this.y,defaultValue:this.props.waypoint.y,onChange:this.onChange}),ne.a.createElement(Q.a.Prepend,null,ne.a.createElement(Q.a.Text,null,"Angle")),ne.a.createElement(Z.a,{className:"mr-2",ref:this.angle,defaultValue:this.props.waypoint.angle,onChange:this.onChange}),ne.a.createElement(Q.a.Prepend,null,ne.a.createElement(Q.a.Text,null,"V")),ne.a.createElement(Z.a,{className:"mr-2",ref:this.v,defaultValue:this.props.waypoint.v,onChange:this.onChange}),ne.a.createElement(Q.a.Prepend,null,ne.a.createElement(Q.a.Text,null,"vMax")),ne.a.createElement(Z.a,{className:"mr-2",ref:this.vMax,defaultValue:this.props.waypoint.vMax,onChange:this.onChange}),ne.a.createElement(ee.a,{className:"mr-2",variant:"danger",onClick:this.remove},ne.a.createElement(te.c,null)),ne.a.createElement(ee.a,{onClick:this.add,variant:this.props.color},ne.a.createElement(te.a,null))))}}]),a}(ne.a.Component),se=Object(n.b)((function(e){return{pathName:e.selectedPath}}),(function(e){return{changeListenToMouseStatus:function(t){return e(T(t))},setWaypoint:function(t,a){return e(d(t,a))},removeWaypoint:function(t){return e(v(t))}}}))(ie),ce=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getSwerveWaypointInfo=n.getSwerveWaypointInfo.bind(Object($.a)(n)),n.getTankWaypointInfo=n.getTankWaypointInfo.bind(Object($.a)(n)),n.getWaypointInfo=n.getWaypointInfo.bind(Object($.a)(n)),n}return Object(o.a)(a,[{key:"getTankWaypointInfo",value:function(e,t){return ne.a.createElement(se,{id:t,key:t,waypoint:e,waypointsLength:this.props.path.waypoints.length,color:t===this.props.addWaypointInIndex?"success":"primary"})}},{key:"getSwerveWaypointInfo",value:function(e,t){return ne.a.createElement(oe,{id:t,key:t,waypoint:e,waypointsLength:this.props.path.waypoints.length,color:t===this.props.addWaypointInIndex?"success":"primary"})}},{key:"getWaypointInfo",value:function(e,t){return this.props.driveType===y.Tank?this.getTankWaypointInfo(e,t):this.props.driveType===y.Swerve?this.getSwerveWaypointInfo(e,t):ne.a.createElement("span",null)}},{key:"render",value:function(){var e=this;return ne.a.createElement("div",{className:"WaypointsList"},this.props.path?this.props.path.waypoints.map((function(t,a){return e.getWaypointInfo(t,a)})):ne.a.createElement("span",null,"There is no waypoints..."))}}]),a}(ne.a.Component),le=Object(n.b)((function(e){return{driveType:e.driveType,path:e.paths[e.selectedPath],addWaypointInIndex:e.addWaypointInIndex}}),(function(e){return{}}))(ce);function pe(e,t){var a=e.getContext("2d");a.clearRect(0,0,e.width,e.height),function(e,t){e.beginPath(),e.rect(t.fieldConfig.topLeftXPixel,t.fieldConfig.topLeftYPixel,t.fieldConfig.widthInPixel,t.fieldConfig.heigthInPixel),e.strokeStyle="blue",e.stroke()}(a,t),t.path&&(t.path.isIllegal()||0===t.path.coords.length?ue(a,t):(function(e,t){e.beginPath(),t.path.coords.forEach((function(a,n){var r=a.x/t.fieldConfig.widthPixelToMeter+t.fieldConfig.topLeftXPixel,o=a.y/t.fieldConfig.hightPixelToMeter+t.fieldConfig.topLeftYPixel;0===n?e.moveTo(r,o):e.lineTo(r,o)})),e.strokeStyle="Yellow",e.stroke()}(a,t),ue(a,t),function(e,t){var a=t.isPathInReverse?-1:1,n=t.robotDrawConfig.length/t.fieldConfig.widthPixelToMeter,r=.6*t.robotDrawConfig.width/t.fieldConfig.hightPixelToMeter,o=a*t.robotDrawConfig.center/t.fieldConfig.widthPixelToMeter;e.beginPath(),e.save(),function(e,t,a,n){var r=t.rangePosition,o=t.robotDrawConfig.width/t.fieldConfig.hightPixelToMeter,i=t.path.coords[r].x/t.fieldConfig.widthPixelToMeter-a/2+t.fieldConfig.topLeftXPixel,s=t.path.coords[r].y/t.fieldConfig.hightPixelToMeter-o/2+t.fieldConfig.topLeftYPixel;e.translate(i+a/2,s+o/2),e.rotate(t.path.coords[r].angle),e.fillStyle="white",e.fillRect(-a/2-n,-o/2,a,o)}(e,t,n,o),function(e){e.arc(0,0,1.5,0,2*Math.PI,!1),e.fillStyle="rgb(50, 100, 0)",e.fill()}(e),he(e,a,n,o,r,"blue"),he(e,a,-n,o,r,"red"),e.restore()}(a,t)))}function ue(e,t){t.path.waypoints.forEach((function(a){var n=a.x/t.fieldConfig.widthPixelToMeter+t.fieldConfig.topLeftXPixel,r=a.y/t.fieldConfig.hightPixelToMeter+t.fieldConfig.topLeftYPixel;e.beginPath(),e.arc(n,r,2,0,2*Math.PI,!1),e.fillStyle="red",e.fill()}))}function he(e,t,a,n,r,o){e.beginPath(),e.moveTo(t*(a/2)-n,-r/2),e.lineTo(t*(a/2)-n,r/2),e.strokeStyle=o,e.stroke()}var fe=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).canvas=ne.a.createRef(),n.onClick=n.onClick.bind(Object($.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){pe(this.canvas.current,this.props)}},{key:"componentDidUpdate",value:function(){var e=this.canvas.current;this.props.listenToMouseClicks?e.addEventListener("mousedown",this.onClick):e.removeEventListener("mousedown",this.onClick),pe(e,this.props)}},{key:"onClick",value:function(e){var t=this.canvas.current,a=t.getBoundingClientRect(),n=t.width/a.width,r=t.height/a.height,o=((e.clientX-a.left)*n-this.props.fieldConfig.topLeftXPixel)*this.props.fieldConfig.widthPixelToMeter,i=((e.clientY-a.top)*r-this.props.fieldConfig.topLeftYPixel)*this.props.fieldConfig.hightPixelToMeter;this.props.addWaypoint({x:Number(o.toFixed(3)),y:Number(i.toFixed(3))})}},{key:"render",value:function(){return ne.a.createElement("div",{className:"FieldView"},ne.a.createElement("canvas",{className:"FieldImage",ref:this.canvas,style:{backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:"url("+this.props.filedImageUrl+")"}}))}}]),a}(ne.a.Component),de=Object(n.b)((function(e){return{filedImageUrl:e.imageUrl,fieldConfig:e.fieldConfig,rangePosition:e.rangePosition,path:e.paths[e.selectedPath],robotDrawConfig:e.robotDrawConfig,listenToMouseClicks:e.listenToMouseClicks,isPathInReverse:!!e.paths[e.selectedPath]&&e.paths[e.selectedPath].isReverse()}}),(function(e){return{addWaypoint:function(t){return e(function(e){return{type:"ADD_WAYPOINT",payload:{waypoint:e}}}(t))}}}))(fe),ve=a(112),me=a(111),ge=a(75),ye=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getData=n.getData.bind(Object($.a)(n)),n.style={fontSize:20,fontWeight:"bold"},n}return Object(o.a)(a,[{key:"getData",value:function(){return{}}},{key:"getConfigInfo",value:function(){return""}},{key:"getBody",value:function(){return ne.a.createElement("div",null)}},{key:"render",value:function(){return ne.a.createElement("div",null,ne.a.createElement(me.a,{className:"ml-0 mb-1"},ne.a.createElement("span",{style:this.style},this.getConfigInfo())),ne.a.createElement(ve.a,null,this.getBody()))}}]),a}(ne.a.Component),be=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={driveType:y.Tank},n.setDriveTypeTank=n.setDriveTypeTank.bind(Object($.a)(n)),n.setDriveTypeSwerve=n.setDriveTypeSwerve.bind(Object($.a)(n)),n}return Object(o.a)(a,[{key:"getData",value:function(){return{driveType:this.state.driveType}}},{key:"componentDidMount",value:function(){var e=this;this.props.setElementData("driveType",this.getData),this.setState((function(){return{driveType:e.props.driveType}}))}},{key:"setDriveTypeTank",value:function(){this.setState((function(){return{driveType:y.Tank}}))}},{key:"setDriveTypeSwerve",value:function(){this.setState((function(){return{driveType:y.Swerve}}))}},{key:"getConfigInfo",value:function(){return"Path config:"}},{key:"getBody",value:function(){return ne.a.createElement(me.a,{className:"mb-3"},ne.a.createElement(ge.a,null,ne.a.createElement(ee.a,{block:!0,onClick:this.setDriveTypeTank,active:this.state.driveType===y.Tank},"Tank")),ne.a.createElement(ge.a,null,ne.a.createElement(ee.a,{block:!0,onClick:this.setDriveTypeSwerve,active:this.state.driveType===y.Swerve},"Swerve")))}}]),a}(ye),Pe=Object(n.b)((function(e){return{driveType:e.driveType}}),(function(e){return{}}))(be),Ee=a(116),je=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={lastProjectPath:""},n.CSVFolderRef=ne.a.createRef(),n.projectFolderRef=ne.a.createRef(),n.resetProjectPath=n.resetProjectPath.bind(Object($.a)(n)),n.onProjectFolderPathChange=n.onProjectFolderPathChange.bind(Object($.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.setElementData("foldersConfig",this.getData),this.props.setElementData("resetProjectPath",this.resetProjectPath),this.setState((function(){return{lastProjectPath:e.props.projectPath}}))}},{key:"getData",value:function(){return{saveCSVTo:this.CSVFolderRef.current.value,projectPath:this.projectFolderRef.current.value}}},{key:"getConfigInfo",value:function(){return"Folders config:"}},{key:"onProjectFolderPathChange",value:function(){N(this.projectFolderRef.current.value)}},{key:"resetProjectPath",value:function(){this.props.projectPath!==this.state.lastProjectPath&&N(this.state.lastProjectPath)}},{key:"getBody",value:function(){return ne.a.createElement("div",null,ne.a.createElement(Ee.a.Row,null,ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ee.a.Label,null,"Project folder"),ne.a.createElement(Ee.a.Control,{defaultValue:this.props.projectPath,ref:this.projectFolderRef,onChange:this.onProjectFolderPathChange}))),ne.a.createElement(Ee.a.Row,null,ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ee.a.Label,null,"Paths CSV folder:"),ne.a.createElement(Ee.a.Control,{defaultValue:this.props.saveCSVTo,ref:this.CSVFolderRef}))))}}]),a}(ye),we=Object(n.b)((function(e){return{projectPath:e.projectPath,saveCSVTo:e.saveCSVTo}}),(function(e){return{}}))(je),Ce=a(117),Te=a(113),Oe=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).robotWidthRef=ne.a.createRef(),n.robotLengthRef=ne.a.createRef(),n.robotCenterRef=ne.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.setElementData("robotDrawConfig",this.getData)}},{key:"componentDidUpdate",value:function(){this.robotWidthRef.current.value=this.props.robotDrawConfig.width,this.robotLengthRef.current.value=this.props.robotDrawConfig.length,this.robotCenterRef.current.value=this.props.robotDrawConfig.center}},{key:"getData",value:function(){return{robotDrawConfig:new f(this.robotWidthRef.current.value,this.robotLengthRef.current.value,this.robotCenterRef.current.value)}}},{key:"getConfigInfo",value:function(){return"Robot draw config:"}},{key:"getBody",value:function(){return ne.a.createElement(Ee.a.Row,null,ne.a.createElement(Ee.a.Group,{as:ge.a,md:"4"},ne.a.createElement(Ce.a,{overlay:ne.a.createElement(Te.a,null," with bumper ")},ne.a.createElement(Ee.a.Label,null,"Width")),ne.a.createElement(Ee.a.Control,{type:"number",ref:this.robotWidthRef,defaultValue:this.props.robotDrawConfig.width})),ne.a.createElement(Ee.a.Group,{as:ge.a,md:"4"},ne.a.createElement(Ce.a,{overlay:ne.a.createElement(Te.a,null," with bumper ")},ne.a.createElement(Ee.a.Label,null,"Length")),ne.a.createElement(Ee.a.Control,{type:"number",ref:this.robotLengthRef,defaultValue:this.props.robotDrawConfig.length})),ne.a.createElement(Ee.a.Group,{as:ge.a,md:"4"},ne.a.createElement(Ce.a,{overlay:ne.a.createElement(Te.a,null,ne.a.createElement("span",{style:{color:"red"}},"back")," "," (-) < ",ne.a.createElement("span",{style:{color:"rgb(50, 100, 0)"}}," center ")," < (+) "," ",ne.a.createElement("span",{style:{color:"blue"}},"front"))},ne.a.createElement(Ee.a.Label,null,"Center")),ne.a.createElement(Ee.a.Control,{type:"number",ref:this.robotCenterRef,defaultValue:this.props.robotDrawConfig.center})))}}]),a}(ye),Se=Object(n.b)((function(e){return{robotDrawConfig:e.robotDrawConfig}}),(function(e){return{}}))(Oe),Re=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).fieldHeightInPixelRef=ne.a.createRef(),n.fieldHeightInMeterRef=ne.a.createRef(),n.fieldWidthInPixelRef=ne.a.createRef(),n.fieldWidthInMeterRef=ne.a.createRef(),n.filedImageNameRef=ne.a.createRef(),n.fieldTopLeftXRef=ne.a.createRef(),n.fieldTopLeftYRef=ne.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.setElementData("filedConfig",this.getData)}},{key:"componentDidUpdate",value:function(){this.fieldHeightInMeterRef.current.value=this.props.fieldConfig.heightInMeter,this.fieldWidthInMeterRef.current.value=this.props.fieldConfig.widthInMeter,this.fieldTopLeftXRef.current.value=this.props.fieldConfig.topLeftXPixel,this.fieldTopLeftYRef.current.value=this.props.fieldConfig.topLeftYPixel,this.fieldWidthInPixelRef.current.value=this.props.fieldConfig.widthInPixel,this.fieldHeightInPixelRef.current.value=this.props.fieldConfig.heigthInPixel,this.filedImageNameRef.current.value=this.props.filedImageUrl}},{key:"getData",value:function(){return{image:this.filedImageNameRef.current.value,fieldConfig:new h(this.fieldWidthInMeterRef.current.value,this.fieldHeightInMeterRef.current.value,this.fieldTopLeftXRef.current.value,this.fieldTopLeftYRef.current.value,this.fieldWidthInPixelRef.current.value,this.fieldHeightInPixelRef.current.value)}}},{key:"getConfigInfo",value:function(){return"Filed config:"}},{key:"getBody",value:function(){return ne.a.createElement("div",null,ne.a.createElement(Ee.a.Row,null,ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ce.a,{overlay:ne.a.createElement(Te.a,null," In meter ")},ne.a.createElement(Ee.a.Label,null,"Width")),ne.a.createElement(Ee.a.Control,{defaultValue:this.props.fieldConfig.widthInMeter,ref:this.fieldWidthInMeterRef,type:"number"})),ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ce.a,{overlay:ne.a.createElement(Te.a,null," In meter ")},ne.a.createElement(Ee.a.Label,null,"Height")),ne.a.createElement(Ee.a.Control,{defaultValue:this.props.fieldConfig.heightInMeter,ref:this.fieldHeightInMeterRef,type:"number"}))),ne.a.createElement(Ee.a.Row,null,ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ee.a.Label,null,"Image"),ne.a.createElement(Ee.a.Control,{defaultValue:this.props.filedImageUrl,ref:this.filedImageNameRef}))),ne.a.createElement(Ee.a.Row,null,ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ee.a.Label,null,"Top left x"),ne.a.createElement(Ee.a.Control,{defaultValue:this.props.fieldConfig.topLeftXPixel,ref:this.fieldTopLeftXRef,type:"number"})),ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ee.a.Label,null,"Top left y"),ne.a.createElement(Ee.a.Control,{defaultValue:this.props.fieldConfig.topLeftYPixel,ref:this.fieldTopLeftYRef,type:"number"})),ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ce.a,{overlay:ne.a.createElement(Te.a,null," In pixel ")},ne.a.createElement(Ee.a.Label,null,"Width")),ne.a.createElement(Ee.a.Control,{defaultValue:this.props.fieldConfig.widthInPixel,ref:this.fieldWidthInPixelRef,type:"number"})),ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ce.a,{overlay:ne.a.createElement(Te.a,null," In pixel ")},ne.a.createElement(Ee.a.Label,null,"Height")),ne.a.createElement(Ee.a.Control,{defaultValue:this.props.fieldConfig.heigthInPixel,ref:this.fieldHeightInPixelRef,type:"number"}))))}}]),a}(ye),ke=Object(n.b)((function(e){return{fieldConfig:e.fieldConfig,filedImageUrl:e.image}}),(function(e){return{}}))(Re),xe=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).pathWidthRef=ne.a.createRef(),n.robotMaxVRef=ne.a.createRef(),n.robotMaxAccRef=ne.a.createRef(),n.robotLoopTimeRef=ne.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.setElementData("pathConfig",this.getData)}},{key:"componentDidUpdate",value:function(){this.robotMaxVRef.current.value=this.props.pathConfig.vMax,this.pathWidthRef.current.value=this.props.pathConfig.width,this.robotMaxAccRef.current.value=this.props.pathConfig.acc,this.robotLoopTimeRef.current.value=this.props.pathConfig.robotLoopTime}},{key:"getData",value:function(){return{pathConfig:{vMax:Number(this.robotMaxVRef.current.value),width:Number(this.pathWidthRef.current.value),acc:Number(this.robotMaxAccRef.current.value),robotLoopTime:Number(this.robotLoopTimeRef.current.value)}}}},{key:"getBody",value:function(){return ne.a.createElement(Ee.a.Row,null,ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ce.a,{overlay:ne.a.createElement(Te.a,null," m ")},ne.a.createElement(Ee.a.Label,null,"Width")),ne.a.createElement(Ee.a.Control,{type:"number",ref:this.pathWidthRef,defaultValue:this.props.pathConfig.width})),ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ce.a,{overlay:ne.a.createElement(Te.a,null," m / s ")},ne.a.createElement(Ee.a.Label,null,"Max V")),ne.a.createElement(Ee.a.Control,{type:"number",ref:this.robotMaxVRef,defaultValue:this.props.pathConfig.vMax})),ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ce.a,{overlay:ne.a.createElement(Te.a,null," m / s ^ 2 ")},ne.a.createElement(Ee.a.Label,null,"Max Acc")),ne.a.createElement(Ee.a.Control,{type:"number",ref:this.robotMaxAccRef,defaultValue:this.props.pathConfig.acc})),ne.a.createElement(Ee.a.Group,{as:ge.a},ne.a.createElement(Ce.a,{overlay:ne.a.createElement(Te.a,null," s ")},ne.a.createElement(Ee.a.Label,null,"Loop time")),ne.a.createElement(Ee.a.Control,{type:"number",ref:this.robotLoopTimeRef,defaultValue:this.props.pathConfig.robotLoopTime})))}}]),a}(ye),Ie=Object(n.b)((function(e){return{pathConfig:e.pathConfig}}),(function(e){return{}}))(xe),Ne=a(114),De=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).saveSettings=n.saveSettings.bind(Object($.a)(n)),n.closeSettings=n.closeSettings.bind(Object($.a)(n)),n.getAppVersion=n.getAppVersion.bind(Object($.a)(n)),n.setElementData=n.setElementData.bind(Object($.a)(n)),n.getUpdateButton=n.getUpdateButton.bind(Object($.a)(n)),n.getFoldersConfig=n.getFoldersConfig.bind(Object($.a)(n)),n}return Object(o.a)(a,[{key:"setElementData",value:function(e,t){this[e]=t}},{key:"saveSettings",value:function(){var e=Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)({},this.driveType()),this.pathConfig()),this.filedConfig()),this.foldersConfig()),this.robotDrawConfig());this.props.setSettings(e),this.props.closePopups(),e.image!==this.props.filedImageUrl&&function(e){_.apply(this,arguments)}(e.image)}},{key:"getUpdateButton",value:function(){return void 0!==this.props.newVersion?ne.a.createElement(ee.a,{variant:"outline-success",onClick:q},"Update to v".concat(this.props.newVersion)):ne.a.createElement("span",null)}},{key:"getAppVersion",value:function(){return this.props.isWeb?ne.a.createElement("span",null):ne.a.createElement("div",{style:{fontSize:10}},"v",this.props.version)}},{key:"getFoldersConfig",value:function(){return this.props.isWeb?ne.a.createElement("span",null):ne.a.createElement(we,{setElementData:this.setElementData})}},{key:"closeSettings",value:function(){this.resetProjectPath(),this.props.closePopups()}},{key:"render",value:function(){return ne.a.createElement(Ne.a,{show:this.props.popupsStatus.settingsPopup,onHide:this.closeSettings,backdrop:"static"},ne.a.createElement(Ne.a.Header,null,ne.a.createElement(Ne.a.Title,null,"Settings")),ne.a.createElement(Ne.a.Body,null,ne.a.createElement("div",{className:"SettingsBody"},this.getFoldersConfig(),ne.a.createElement(Pe,{setElementData:this.setElementData}),ne.a.createElement(Ie,{setElementData:this.setElementData}),ne.a.createElement(ke,{setElementData:this.setElementData}),ne.a.createElement(Se,{setElementData:this.setElementData}),this.getAppVersion())),ne.a.createElement(Ne.a.Footer,null,this.getUpdateButton(),ne.a.createElement(ee.a,{variant:"outline-primary",onClick:this.closeSettings},"cancel"),ne.a.createElement(ee.a,{onClick:this.saveSettings},"save")))}}]),a}(ne.a.Component),Ve=Object(n.b)((function(e){return{popupsStatus:e.popupsStatus,projectPath:e.projectPath,newVersion:e.newVersion,filedImageUrl:e.image,version:e.version,isWeb:e.isWeb}}),(function(e){return{setSettings:function(t){return e(function(e){return{type:"SET_SETTINGS",payload:{settings:e}}}(t))},closePopups:function(){return e(C())}}}))(De),Me=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).range=ne.a.createRef(),n.changeRangePosition=n.changeRangePosition.bind(Object($.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.range.current.value=0,this.range.current.disabled=!0,document.querySelector("canvas").addEventListener("wheel",(function(t){return e.changeRangePosition(e.props.rangePosition-Math.sign(t.deltaY))}))}},{key:"componentDidUpdate",value:function(){this.props.path?(this.range.current.max=this.props.path.sourceSetpoints.length-1,this.range.current.value=this.props.rangePosition,this.range.current.disabled=!1):(this.range.current.disabled=!0,this.range.current.value=0)}},{key:"changeRangePosition",value:function(e){if(this.props.path){this.props.setDrawRobotInterval();var t=this.props.rangePosition,a=this.props.path.sourceSetpoints.length-1,n=e>=0&&e<=a?e:t;this.props.changeRangePosition(n)}}},{key:"render",value:function(){var e=this,t={fontSize:"12px"};return ne.a.createElement(ve.a,null,ne.a.createElement(me.a,null,ne.a.createElement(ge.a,{sm:.5,style:t},this.props.path?(this.props.robotLoopTime*this.props.rangePosition).toFixed(2):"0.00"),ne.a.createElement(ge.a,null,ne.a.createElement(Ee.a.Control,{ref:this.range,type:"range",onChange:function(t){return e.changeRangePosition(t.target.value)}})),ne.a.createElement(ge.a,{sm:.5,style:t},this.props.path&&!this.props.path.isIllegal()?(Math.sign(this.props.path.sourceSetpoints.length)*(this.props.path.sourceSetpoints.length-1)*this.props.robotLoopTime).toFixed(2):"0.00")))}}]),a}(ne.a.Component),Le=Object(n.b)((function(e){return{rangePosition:e.rangePosition,path:e.paths[e.selectedPath],robotLoopTime:e.pathConfig.robotLoopTime}}),(function(e){return{changeRangePosition:function(t){return e(j(t))},setDrawRobotInterval:function(){return e(w())}}}))(Me),We=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).cancelButtonRef=ne.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(){this.props.show&&(void 0!==this.props.refToUse&&null!==this.props.refToUse.current?this.props.refToUse.current.focus():null!==this.cancelButtonRef.current&&this.cancelButtonRef.current.focus())}},{key:"render",value:function(){var e=ne.a.createElement(ee.a,{onClick:this.props.confirm},"confirm"),t=ne.a.createElement(ee.a,{variant:"outline-primary",onClick:this.props.close,ref:this.cancelButtonRef},"cancel");return void 0===this.props.confirm&&(e=ne.a.createElement("span",null),t=ne.a.createElement(ee.a,{ref:this.cancelButtonRef,onClick:this.props.close},"ok")),ne.a.createElement(Ne.a,{show:this.props.show,onHide:this.props.close},ne.a.createElement(Ne.a.Header,null,ne.a.createElement(Ne.a.Title,null,this.props.title)),ne.a.createElement(Ne.a.Body,null,this.props.body),ne.a.createElement(Ne.a.Footer,null,t,e))}}]),a}(ne.a.Component),Ae=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).newPathRef=ne.a.createRef(),n.renamePathRef=ne.a.createRef(),n.renamePath=n.renamePath.bind(Object($.a)(n)),n.deletePath=n.deletePath.bind(Object($.a)(n)),n.createNewPath=n.createNewPath.bind(Object($.a)(n)),n}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(){this.props.popupsStatus.renamePathPopup&&(this.renamePathRef.current.defaultValue=this.props.pathName)}},{key:"deletePath",value:function(){this.props.closePopups(),this.props.deletePath()}},{key:"renamePath",value:function(){this.renamePathRef.current.value&&(this.props.renamePath(this.renamePathRef.current.value),this.props.closePopups())}},{key:"createNewPath",value:function(){this.newPathRef.current.value&&!this.props.pathsName.includes(this.newPathRef.current.value)&&(this.props.addPath(this.newPathRef.current.value),this.props.resetRangePosition(),this.props.closePopups())}},{key:"render",value:function(){return ne.a.createElement("div",null,ne.a.createElement(We,{show:this.props.popupsStatus.deletePathPopup,body:"Are you sure you want to delete path?",close:this.props.closePopups,confirm:this.deletePath,title:"Delete path"}),ne.a.createElement(We,{show:this.props.popupsStatus.renamePathPopup,body:ne.a.createElement(Z.a,{ref:this.renamePathRef}),close:this.props.closePopups,refToUse:this.renamePathRef,confirm:this.renamePath,title:"Rename path"}),ne.a.createElement(We,{body:ne.a.createElement(Z.a,{ref:this.newPathRef,placeholder:"Path name"}),show:this.props.popupsStatus.createNewPathPopup,close:this.props.closePopups,confirm:this.createNewPath,title:"Create a new path"}),ne.a.createElement(We,{show:this.props.popupsStatus.pathIsIllegalPopup,title:this.props.path&&this.props.path.isIllegal()?this.props.path.error.info:"",body:ne.a.createElement("div",null,this.props.path&&this.props.path.isIllegal()?"".concat(this.props.path.error.problem,"\n \n").concat(this.props.path.error.solution):""),close:this.props.closePopups}),ne.a.createElement(We,{title:"v".concat(this.props.newVersion," is available"),show:this.props.popupsStatus.newVersionPopup,close:this.props.closePopups,body:ne.a.createElement("div",null,"There is a new version waiting for you to update to!\nTo update jest go to settings and click on update...")}),ne.a.createElement(We,{show:this.props.popupsStatus.savePathToCSVPopup&&""===this.props.saveCSVTo&&!this.props.isWeb,title:"Save path CSV",body:"Can't save path CSV, you need to set CSV folder path in settings!",close:this.props.closePopups}),ne.a.createElement(We,{show:this.props.popupsStatus.savePathToCSVPopup&&""!==this.props.saveCSVTo,title:"Save path CSV",body:"Path CSV saved!",close:this.props.closePopups}))}}]),a}(ne.a.Component),_e=Object(n.b)((function(e){return{pathName:e.selectedPath?e.selectedPath:"",path:e.paths[e.selectedPath],pathsName:Object.keys(e.paths),popupsStatus:e.popupsStatus,newVersion:e.newVersion,saveCSVTo:e.saveCSVTo,isWeb:e.isWeb}}),(function(e){return{resetRangePosition:function(){return e(j(0))},closePopups:function(){return e(C())},renamePath:function(t){return e(function(e){return{type:"RENAME_PATH",payload:{name:e}}}(t))},addPath:function(t){return e(m(t))},deletePath:function(){return e({type:"DELETE_PATH",payload:{}})}}}))(Ae),Fe=a(57),Ue=a(115),Ge=a(76),He=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPlayButton=n.getPlayButton.bind(Object($.a)(n)),n.savePathToCSV=n.savePathToCSV.bind(Object($.a)(n)),n.getCSVButton=n.getCSVButton.bind(Object($.a)(n)),n.setDrawRobotInterval=n.setDrawRobotInterval.bind(Object($.a)(n)),n.isRangePositionInTheEnd=n.isRangePositionInTheEnd.bind(Object($.a)(n)),n}return Object(o.a)(a,[{key:"savePathToCSV",value:function(){this.props.path&&this.props.path.isIllegal()?this.props.showIllegalPathPopup():(""!==this.props.saveCSVTo||this.props.isWeb)&&function(e,t,a){F.apply(this,arguments)}(this.props.path,this.props.pathName,this.props.saveCSVTo)}},{key:"isRangePositionInTheEnd",value:function(){return this.props.path&&this.props.path.sourceSetpoints.length-1===this.props.rangePosition}},{key:"setDrawRobotInterval",value:function(){var e=this,t=void 0;this.props.path&&!this.props.drawRobotInterval&&this.props.path.sourceSetpoints.length>0&&(this.isRangePositionInTheEnd()&&this.props.changeRangePosition(0),t=setInterval((function(){e.isRangePositionInTheEnd()?e.props.setDrawRobotInterval():e.props.changeRangePosition(e.props.rangePosition+1)}),1e3*this.props.robotLoopTime)),this.props.setDrawRobotInterval(t)}},{key:"getCSVButton",value:function(){var e=this.props.path&&this.props.path.isIllegal();return ne.a.createElement(ee.a,{size:"lg",className:"mr-3",onClick:this.savePathToCSV,title:"Save csv path to robot",disabled:void 0===this.props.path,variant:e?"danger":"primary"},e?ne.a.createElement(te.e,null):ne.a.createElement(Fe.c,null))}},{key:"getPlayButton",value:function(){return this.props.drawRobotInterval?ne.a.createElement(te.f,null):this.isRangePositionInTheEnd()?ne.a.createElement(te.h,null):ne.a.createElement(te.g,null)}},{key:"render",value:function(){var e=this;return ne.a.createElement(ve.a,null,ne.a.createElement(me.a,null,ne.a.createElement(ee.a,{size:"lg",className:"mr-3",title:"Add waypoint with mouse",disabled:void 0===this.props.path,onClick:this.props.changeListenToMouseStatus,variant:this.props.listenToMouseClicks?"success":"primary"},ne.a.createElement(Ge.a,null)),this.getCSVButton(),ne.a.createElement(ee.a,{className:"mr-3",size:"lg",title:"Settings",onClick:this.props.showSettings,variant:this.props.newVersion?"success":"primary"},ne.a.createElement(te.b,null)),ne.a.createElement(Ue.a,null,ne.a.createElement(Ue.a.Toggle,{size:"lg"},this.props.pathName?this.props.pathName:"Select Path"),ne.a.createElement(Ue.a.Menu,null,this.props.pathsName.map((function(t,a){return ne.a.createElement(Ue.a.Item,{as:"button",key:a,onClick:function(){return e.props.changeSelectedPath(t)}},t)})),ne.a.createElement(Ue.a.Divider,null),ne.a.createElement(Ue.a.Item,{as:"button",onClick:this.props.showCreateNewPathPopup},"New path"))),ne.a.createElement(ee.a,{className:"mr-3 ml-4",size:"lg",onClick:this.setDrawRobotInterval,disabled:void 0===this.props.path||this.props.path.isIllegal()},this.getPlayButton()),ne.a.createElement(ee.a,{className:"mr-3",size:"lg",title:"Delete path",variant:"danger",onClick:this.props.showDeletePathPopup,disabled:void 0===this.props.path},ne.a.createElement(te.c,null)),ne.a.createElement(ee.a,{className:"mr-3",size:"lg",title:"Rename path",onClick:this.props.showRenamePathPopup,disabled:void 0===this.props.path},ne.a.createElement(te.d,null)),ne.a.createElement(ee.a,{size:"lg",className:"mr-3",onClick:this.props.changeDirection,disabled:void 0===this.props.path||this.props.path.isTurnInPlace()},this.props.path&&this.props.path.isReverse()?ne.a.createElement(Fe.a,{className:"mr-2"}):ne.a.createElement(Fe.b,{className:"mr-2"}),"in reverse")))}}]),a}(ne.a.Component),Be=Object(n.b)((function(e){return{isWeb:e.isWeb,saveCSVTo:e.saveCSVTo,pathName:e.selectedPath,newVersion:e.newVersion,rangePosition:e.rangePosition,pathsName:Object.keys(e.paths),path:e.paths[e.selectedPath],drawRobotInterval:e.drawRobotInterval,robotLoopTime:e.pathConfig.robotLoopTime,listenToMouseClicks:e.listenToMouseClicks}}),(function(e){return{showCreateNewPathPopup:function(){return e(C("createNewPathPopup"))},showIllegalPathPopup:function(){return e(C("pathIsIllegalPopup"))},setDrawRobotInterval:function(t){return e(w(t))},changeRangePosition:function(t){return e(j(t))},showDeletePathPopup:function(){return e(C("deletePathPopup"))},showRenamePathPopup:function(){return e(C("renamePathPopup"))},changeSelectedPath:function(t){return e(function(e){return{type:"CHANGE_SELECTED_PATH",payload:{pathName:e}}}(t))},changeListenToMouseStatus:function(){return e(T())},showSettings:function(){return e(C("settingsPopup"))},changeDirection:function(){return e({type:"CHANGE_DIRECTION",payload:{}})}}}))(He),Ye=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){!function(e){Y.apply(this,arguments)}(this.props.dispatch),function(e){I.apply(this,arguments)}(this.props.dispatch)}},{key:"render",value:function(){return ne.a.createElement("div",{className:"App"},ne.a.createElement(ve.a,{fluid:"md"},ne.a.createElement(_e,null),ne.a.createElement(Ve,null),ne.a.createElement(de,null),ne.a.createElement(Le,null),ne.a.createElement(Be,null),ne.a.createElement(le,null)))}}]),a}(ne.a.Component),Je=Object(n.b)((function(e){return{}}),(function(e){return{dispatch:function(t){return e(t)}}}))(Ye),Xe=a(20),ze=a.n(Xe),qe=function e(){Object(r.a)(this,e),this.createNewPathPopup=!1,this.savePathToCSVPopup=!1,this.pathIsIllegalPopup=!1,this.renamePathPopup=!1,this.deletePathPopup=!1,this.newVersionPopup=!1,this.settingsPopup=!1},$e={popupsStatus:new qe,addWaypointInIndex:void 0,drawRobotInterval:void 0,listenToMouseClicks:!1,selectedPath:void 0,rangePosition:0,driveType:y.Tank,paths:{},robotDrawConfig:new f,pathConfig:new y.Tank.PathConfig,fieldConfig:new h,projectPath:"",saveCSVTo:"",imageUrl:"",image:"",newVersion:void 0,version:"0.0.0",isWeb:!0},Ke=a(77);function Qe(e,t){return function(e){A.apply(this,arguments)}(t.settings),Object(u.a)(Object(u.a)(Object(u.a)({},e),t.settings),{},{selectedPath:void 0})}var Ze=a(46);function et(e,t){return Object(u.a)(Object(u.a)({},e),{},{rangePosition:Number(t.position)})}function tt(e,t){return!e.drawRobotInterval&&t.interval?Object(u.a)(Object(u.a)({},e),{},{drawRobotInterval:t.interval}):(clearInterval(e.drawRobotInterval),Object(u.a)(Object(u.a)({},e),{},{drawRobotInterval:void 0}))}function at(e,t){var a=Object(u.a)({},e),n=e.paths[e.selectedPath].waypoints.map((function(a,n){return n!==t.index?a:function(e,t,a,n,r){var o={x:Number.isNaN(a.x)?t.x:a.x,y:Number.isNaN(a.y)?t.y:a.y,v:Number.isNaN(a.v)?t.v:a.v,vMax:Number.isNaN(a.vMax)?t.vMax:a.vMax,angle:Number.isNaN(a.angle)?t.angle:a.angle,robotAngle:Number.isNaN(a.robotAngle)?t.robotAngle:a.robotAngle};return o.x<0&&(o.x=0),o.x>r.widthInMeter&&(o.x=r.widthInMeter),o.y<0&&(o.y=0),o.y>r.heightInMeter&&(o.y=r.heightInMeter),o.v<0&&(o.v=0),o.v>n.vMax&&(o.v=n.vMax),o.vMax<0&&(o.vMax=0),o.vMax>n.vMax&&(o.vMax=n.vMax),void 0===o.robotAngle&&delete o.robotAngle,Object.assign(new e.driveType.Waypoint,o)}(e,a,t.waypoint,e.pathConfig,e.fieldConfig)}));return a.paths[e.selectedPath]=new e.driveType.Path(n,a.pathConfig),e.paths[e.selectedPath].isReverse()&&a.paths[e.selectedPath].changeDirection(),V(e.selectedPath,a.paths[e.selectedPath]),a}function nt(e,t){var a=Object(u.a)(Object(u.a)({},e),{},{listenToMouseClicks:!1});return delete a.paths[e.selectedPath],a.selectedPath=void 0,function(e,t){L.apply(this,arguments)}(e.selectedPath,e.saveCSVTo),a}function rt(e,t){var a=Object(u.a)(Object(u.a)({},e),{},{selectedPath:t.name});return a.paths[t.name]=a.paths[e.selectedPath],delete a.paths[e.selectedPath],function(e,t){W.apply(this,arguments)}(e.selectedPath,t.name),a}var ot=Object(Ke.a)($e,(function(e,t){return"SET_DRAW_ROBOT_INTERVAL"!==t.type&&"CHANGE_RANGE_POSITION"!==t.type&&(e=et(e=tt(e,{}),{position:0})),"CHANGE_POPUPS_STATUS"===t.type?function(e,t){var a=Object(u.a)(Object(u.a)({},e),{},{popupsStatus:new qe});return void 0!==t.popup&&(a.popupsStatus[t.popup]=!e.popupsStatus[t.popup]),a}(e,t.payload):"CHANGE_RANGE_POSITION"===t.type?et(e,t.payload):"SET_DRAW_ROBOT_INTERVAL"===t.type?tt(e,t.payload):"CHANGE_LISTEN_TO_MOUSE_STATUS"===t.type?function(e,t){var a=void 0!==e.addWaypointInIndex?void 0:t.index,n=void 0!==t.index||!e.listenToMouseClicks;return Object(u.a)(Object(u.a)({},e),{},{listenToMouseClicks:n,addWaypointInIndex:a})}(e,t.payload):e}),(function(e,t){return"ADD_PATH"===t.type?function(e,t){var a=Object(u.a)({},e),n=[];return t.waypoints&&t.waypoints.forEach((function(t){n.push(Object.assign(new e.driveType.Waypoint,t))})),a.paths[t.name]=new e.driveType.Path(n,e.pathConfig),t.isInReverse&&a.paths[t.name].changeDirection(),a.selectedPath=t.waypoints?void 0:t.name,t.waypoints||V(t.name,a.paths[t.name]),a}(e,t.payload):"RENAME_PATH"===t.type?rt(e,t.payload):"DELETE_PATH"===t.type?nt(e,t.payload):"ADD_WAYPOINT"===t.type?function(e,t){var a=[],n=Object(u.a)({},t.waypoint),r=Object.assign(new e.driveType.Waypoint,n);e.paths[e.selectedPath].waypoints.forEach((function(t,n){a.push(t),n===e.addWaypointInIndex&&a.push(r)})),void 0===e.addWaypointInIndex&&a.push(r);var o=Object(u.a)(Object(u.a)({},e),{},{addWaypointInIndex:void 0});return o.paths[e.selectedPath]=new e.driveType.Path(a,e.pathConfig),e.paths[e.selectedPath].isReverse()&&o.paths[e.selectedPath].changeDirection(),V(e.selectedPath,o.paths[e.selectedPath]),o}(e,t.payload):"SET_WAYPOINT"===t.type?at(e,t.payload):"SET_PATH_CONFIG"===t.type?function(e,t){var a=Object.assign(new e.driveType.PathConfig,t.pathConfig),n=Object(u.a)(Object(u.a)({},e),{},{pathConfig:a});return t.driveType&&(n.driveType=t.driveType),n}(e,t.payload):"REMOVE_WAYPOINT"===t.type?function(e,t){var a=[],n=Object(u.a)({},e);return e.paths[e.selectedPath].waypoints.forEach((function(e,n){n!==t.index&&a.push(e)})),n.paths[e.selectedPath]=new e.driveType.Path(a,n.pathConfig),e.paths[e.selectedPath].isReverse()&&n.paths[e.selectedPath].changeDirection(),V(e.selectedPath,n.paths[e.selectedPath]),n}(e,t.payload):"CHANGE_DIRECTION"===t.type?function(e,t){var a=Object(u.a)({},e);return a.paths[e.selectedPath].changeDirection(),V(e.selectedPath,a.paths[e.selectedPath]),a}(e,t.payload):"CHANGE_SELECTED_PATH"===t.type?function(e,t){var a=e.paths[t.pathName],n=Object(u.a)(Object(u.a)({},e),{},{selectedPath:t.pathName});return n.paths[t.pathName]=new e.driveType.Path(a.waypoints,e.pathConfig),a.isReverse()&&n.paths[t.pathName].changeDirection(),n}(e,t.payload):e}),(function(e,t){return"SET_IMAGE"===t.type?function(e,t){return Object(u.a)(Object(u.a)({},e),{},{image:t.image,imageUrl:t.imageUrl})}(e,t.payload):"SET_CSV_PATH"===t.type?function(e,t){return Object(u.a)(Object(u.a)({},e),{},{saveCSVTo:t.path})}(e,t.payload):"SET_SETTINGS"===t.type?Qe(e,t.payload):"SET_PROJECT_PATH"===t.type?function(e,t){return Object(u.a)(Object(u.a)({},e),{},{projectPath:t.projectPath,selectedPath:void 0,paths:{}})}(e,t.payload):"SET_FIELD_CONFIG"===t.type?function(e,t){return Object(u.a)(Object(u.a)({},e),{},{fieldConfig:t.fieldConfig})}(e,t.payload):"SET_ROBOT_DRAW_CONFIG"===t.type?function(e,t){return Object(u.a)(Object(u.a)({},e),{},{robotDrawConfig:t.robotDrawConfig})}(e,t.payload):e}),(function(e,t){return"SET_PLATFORM"===t.type?function(e,t){return Object(u.a)(Object(u.a)({},e),{},{isWeb:t.isWeb})}(e,t.payload):"SET_APP_VERSION"===t.type?function(e,t){return Object(u.a)(Object(u.a)({},e),{},{version:t.version})}(e,t.payload):"SET_NEW_VERSION"===t.type?function(e,t){var a=Object(u.a)(Object(u.a)({},e),{},{newVersion:t.version,popupsStatus:new qe});return a.popupsStatus.newVersionPopup=!0,a}(e,t.payload):e})),it=Object(Ze.b)(ot);it.subscribe((function(){console.log("Store change!",it.getState())}));var st=it;a(103);ze.a.render(ne.a.createElement(n.a,{store:st},ne.a.createElement(Je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,t,a){e.exports=a(104)}},[[78,1,2]]]);
//# sourceMappingURL=main.dd13cd34.chunk.js.map