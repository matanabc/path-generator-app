(this["webpackJsonppath-generator-app"]=this["webpackJsonppath-generator-app"]||[]).push([[0],{125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(99);var a=n(12),r=n(10),o=n(11),i=n(15),c=n(14),s=n(19),u=n.n(s),l=(n(36),n(1)),p=n.n(l),h=n(3),f=n.n(h),d=n(6),v=n(7),m="SET_ROBOT_DRAW_CONFIG",b="SET_PROJECT_PATH",y="SET_FIELD_CONFIG",g="SET_SETTINGS",j="SET_CSV_PATH",w="SET_IMAGE";function E(e){return{type:y,payload:{fieldConfig:e}}}function P(e,t){return{type:w,payload:{imageUrl:e,image:t}}}function O(e){return{type:j,payload:{path:e}}}function C(e){return{type:m,payload:{robotDrawConfig:e}}}var x=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16.5354,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8.001,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Object(r.a)(this,e),this.widthInMeter=Number(t),this.heightInMeter=Number(n),this.topLeftXPixel=Number(a),this.topLeftYPixel=Number(o),this.widthInPixel=Number(i),this.heigthInPixel=Number(c),this.widthPixelToMeter=0===i?0:t/i,this.hightPixelToMeter=0===c?0:n/c},k=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,e),this.center=Number(a),this.length=Number(n),this.width=Number(t)},R="UPDATE_PATH_REDUCER",T="LOAD_PATH";function I(e,t,n){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(f.a.mark((function e(t,n,a){var r,o,i,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.paths,o=a.selected,i=a.driveType,c=a.pathConfig.vMax,s=r[o].waypoints,t=Object.assign(new i.Waypoint,Object(v.a)(Object(v.a)({},t),{},{v:c,vMax:c})),n===s.length&&(0===s[n-1].v&&(s[n-1].v=c),s[n-1].vMax=c,t.v=0),s.splice(n,0,t),e.abrupt("return",z({path:X(s,a)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return D.apply(this,arguments)}function D(){return(D=Object(d.a)(f.a.mark((function e(t,n){var a,r,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.paths,r=n.selected,o=n.selectedWaypoint,(i=a[r].waypoints)[o]=Y(n,i[o],t),e.abrupt("return",z({path:X(i,n),selectedWaypoint:o}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(f.a.mark((function e(t){var n,a,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.paths,a=t.selected,r=t.selectedWaypoint,(o=n[a].waypoints).splice(r,1),e.abrupt("return",z({selectedWaypoint:void 0,path:X(o,t)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return V.apply(this,arguments)}function V(){return(V=Object(d.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.paths[t].waypoints,e.abrupt("return",z({path:X(a,Object(v.a)(Object(v.a)({},n),{},{selected:t})),selectedWaypoint:void 0,selected:t,isPathMode:!0}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(d.a)(f.a.mark((function e(t,n,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de(n,a),delete t[n],e.abrupt("return",z({listenToMouseClicks:!1,selected:void 0,path:void 0}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(d.a)(f.a.mark((function e(t,n,a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(v.a)({},t),n!==a&&(r[a]=r[n],delete r[n],be(n,a)),e.abrupt("return",z({selected:a,paths:r}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(d.a)(f.a.mark((function e(t,n,a,r){var o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[Object.assign(new a.Waypoint,{y:1,vMax:n.vMax}),Object.assign(new a.Waypoint,{x:2,y:1})],t[r]={waypoints:o,isInReverse:!1},e.abrupt("return",z({path:X(o,{driveType:a,pathConfig:n,paths:t,selected:r}),selectedWaypoint:void 0,selected:r,paths:t}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t,n){return{type:T,payload:{name:e,waypoints:t,isInReverse:n}}}function U(e,t){return _.apply(this,arguments)}function _(){return(_=Object(d.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new n.PathConfig(t.vMax||0,t.acc||0,t.width||0,t.length||0,t.robotLoopTime||0),e.abrupt("return",z({driveType:n,pathConfig:t}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t,n){return B.apply(this,arguments)}function B(){return(B=Object(d.a)(f.a.mark((function e(t,n,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.changeDirection(),n[a].isInReverse=t.isReverse(),he(a,n[a]),e.abrupt("return",z({paths:n,path:t}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,n){var a=e.fieldConfig,r=e.pathConfig,o={x:Number.isNaN(n.x)?t.x:n.x,y:Number.isNaN(n.y)?t.y:n.y,v:Number.isNaN(n.v)?t.v:n.v,vMax:Number.isNaN(n.vMax)?t.vMax:n.vMax,angle:Number.isNaN(n.angle)?t.angle:n.angle,robotAngle:Number.isNaN(n.robotAngle)?t.robotAngle:n.robotAngle};return o.x<0&&(o.x=0),o.x>a.widthInMeter&&(o.x=a.widthInMeter),o.y<0&&(o.y=0),o.y>a.heightInMeter&&(o.y=a.heightInMeter),o.v<0&&(o.v=0),o.v>r.vMax&&(o.v=r.vMax),o.vMax<0&&(o.vMax=0),o.vMax>r.vMax&&(o.vMax=r.vMax),void 0===o.robotAngle&&delete o.robotAngle,Object.assign(new e.driveType.Waypoint,o)}function X(e,t){var n=t.driveType,a=t.pathConfig,r=t.paths,o=t.selected,i=new n.Path(e,a);return r[o].isInReverse&&i.changeDirection(),he(o,r[o]),i}var z=function(e){return{type:R,payload:e}};function K(e){var t=[],n=e.map((function(e,n){return 0===n&&(t=function(e){return Object.keys(e).sort()}(e)),function(e,t){return t.map((function(t){return e[t]})).join(",")+","}(e,t)}));return"".concat(t.join(","),",\n").concat(n.join("\n"))}function q(e){var t=e.coords.map((function(e){return $(e)}));return $()+t.join("\n")}function $(e){return e?"".concat(e.angle,",").concat(e.x,",").concat(e.y,","):"Angle,X,Y,\n"}var Q=n(13),Z=n(92),ee=function(){function e(t){Object(r.a)(this,e),this.dispatch=t,this.load()}return Object(o.a)(e,[{key:"load",value:function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadJsonProject(),this.loadRobotDrawConfig(),this.loadFieldConfig(),this.loadFieldImage(),this.loadPathConfig(),this.loadPaths();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadJsonProject",value:function(){try{this.jsonProject=JSON.parse(localStorage.getItem("project settings"))}catch(e){this.jsonProject=void 0}}},{key:"loadRobotDrawConfig",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new k,this.jsonProject&&this.jsonProject.robotDrawConfig&&(t=Object.assign(new k,this.jsonProject.robotDrawConfig)),this.dispatch(C(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFieldConfig",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new x,this.jsonProject&&this.jsonProject.fieldConfig&&(t=Object.assign(new x,this.jsonProject.fieldConfig)),this.dispatch(E(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFieldImage",value:function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=t||this.jsonProject.image,this.dispatch(P(t,t))}catch(n){this.dispatch(P("",""))}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadPathConfig",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.jsonProject.driveType=this.jsonProject.driveType?this.jsonProject.driveType:"Tank",t="Holonomic"===this.jsonProject.driveType?Q.Holonomic:Q.Tank,n=this.jsonProject.pathConfig?this.jsonProject.pathConfig:{},e.t0=this,e.next=7,U(n,t);case 7:e.t1=e.sent,e.t0.dispatch.call(e.t0,e.t1),e.next=18;break;case 11:return e.prev=11,e.t2=e.catch(0),e.t3=this,e.next=16,U(new Q.Tank.PathConfig,Q.Tank);case 16:e.t4=e.sent,e.t3.dispatch.call(e.t3,e.t4);case 18:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadPaths",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.keys(localStorage).forEach((function(e){e.startsWith("path/")&&t.loadJsonPath(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadJsonPath",value:function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=JSON.parse(localStorage.getItem(t)),this.dispatch(H(t.replace("path/",""),n.waypoints,n.isInReverse))}catch(a){}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveJsonProject",value:function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=Object(v.a)({},t)).driveType=t.driveType===Q.Holonomic?"Holonomic":"Tank",localStorage.setItem("project settings",JSON.stringify(n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveJsonPath",value:function(){var e=Object(d.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(v.a)({},n),localStorage.setItem("path/".concat(t),JSON.stringify(a));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveCSVPath",value:function(){var e=Object(d.a)(f.a.mark((function e(t,n){var a,r,o,i,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new Z,r=a.folder(n),Object.keys(t).forEach((function(e){if(e.endsWith("Setpoints")){var a="".concat(n,".").concat(e.replace("_","").replace("Setpoints",""),".csv");r.file(a,K(t[e]))}})),r.file("".concat(n,".coords.csv"),q(t)),e.next=7,a.generateAsync({type:"blob"});case 7:o=e.sent,i=URL.createObjectURL(o),(c=document.createElement("a")).download="".concat(n,".zip"),c.href=i,c.click(),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deletePath",value:function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("path/".concat(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"renameJsonPath",value:function(){var e=Object(d.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=localStorage.getItem("path/".concat(t)),localStorage.setItem("path/".concat(n),a),localStorage.removeItem("path/".concat(t));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),te="CHANGE_SELECTED_PATHS_GROUP",ne="RENAME_GROUP",ae="DELETE_GROUP",re="UPDATE_GROUP",oe="ADD_GROUP";function ie(e,t){return{type:oe,payload:{name:e,paths:t}}}var ce=function(){function e(t){Object(r.a)(this,e),this.ipcRenderer=window.require("electron").ipcRenderer,this.fs=window.require("fs"),this.dispatch=t,this.projectPath="",this.load()}return Object(o.a)(e,[{key:"load",value:function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setProjectFolderPath();case 2:this.loadJsonProject(),this.setCSVFolderPath(),this.loadRobotDrawConfig(),this.loadFieldConfig(),this.loadFieldImage(),this.loadPathConfig(),this.loadGroups(),this.loadPaths();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeProjectFolderPath",value:function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ipcRenderer.invoke("UpdateProjctPath",t);case 2:this.load();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setProjectFolderPath",value:function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ipcRenderer.invoke("GetProjctPath");case 2:this.projectPath=e.sent,this.dispatch((t=this.projectPath,{type:b,payload:{projectPath:t}}));case 4:case"end":return e.stop()}var t}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCSVFolderPath",value:function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.jsonProject&&this.jsonProject.saveCSVTo&&""!==this.jsonProject.saveCSVTo?this.dispatch(O(this.jsonProject.saveCSVTo)):this.dispatch(O("".concat(this.projectPath,"/csv")));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadJsonProject",value:function(){try{var e=this.fs.readFileSync("".concat(this.projectPath,"/PathGenerator.json"));this.jsonProject=JSON.parse(e)}catch(t){this.jsonProject=void 0}}},{key:"loadRobotDrawConfig",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new k,this.jsonProject&&this.jsonProject.robotDrawConfig&&(t=Object.assign(new k,this.jsonProject.robotDrawConfig)),this.dispatch(C(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFieldConfig",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new x,this.jsonProject&&this.jsonProject.fieldConfig&&(t=Object.assign(new x,this.jsonProject.fieldConfig)),this.dispatch(E(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFieldImage",value:function(){var e=Object(d.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=t||this.jsonProject.image).startsWith("http")){e.next=5;break}return this.dispatch(P(t,t)),e.abrupt("return");case 5:n="",n=-1===t.indexOf("/")?"".concat(this.projectPath,"/").concat(t):t,a=this.fs.readFileSync(n),r=URL.createObjectURL(new Blob([a])),this.dispatch(P(r,t)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.dispatch(P("",t||""));case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadPathConfig",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.jsonProject.driveType=this.jsonProject.driveType?this.jsonProject.driveType:"Tank",t="Holonomic"===this.jsonProject.driveType?Q.Holonomic:Q.Tank,n=this.jsonProject.pathConfig?this.jsonProject.pathConfig:{},e.t0=this,e.next=7,U(n,t);case 7:e.t1=e.sent,e.t0.dispatch.call(e.t0,e.t1),e.next=18;break;case 11:return e.prev=11,e.t2=e.catch(0),e.t3=this,e.next=16,U(new Q.Tank.PathConfig,Q.Tank);case 16:e.t4=e.sent,e.t3.dispatch.call(e.t3,e.t4);case 18:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadGroups",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.readdirSync("".concat(this.projectPath,"/groups")).forEach(function(){var e=Object(d.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.endsWith(".json")&&t.loadGroup(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(n){}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadGroup",value:function(){var e=Object(d.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=this.fs.readFileSync("".concat(this.projectPath,"/groups/").concat(t)),a=JSON.parse(n),this.dispatch(ie(t.replace(".json",""),a))}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadPaths",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.readdirSync("".concat(this.projectPath,"/paths")).forEach(function(){var e=Object(d.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.endsWith(".json")&&t.loadJsonPath(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(n){}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadJsonPath",value:function(){var e=Object(d.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=this.fs.readFileSync("".concat(this.projectPath,"/paths/").concat(t)),a=JSON.parse(n),this.dispatch(H(t.replace(".json",""),a.waypoints,a.isInReverse))}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveJsonProject",value:function(){var e=Object(d.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(n=Object(v.a)({},t)).driveType=t.driveType===Q.Holonomic?"Holonomic":"Tank",delete n.projectPath,a=JSON.stringify(n),this.fs.existsSync(this.projectPath)||this.fs.mkdirSync(this.projectPath),this.fs.writeFileSync("".concat(this.projectPath,"/PathGenerator.json"),a)}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveJsonPath",value:function(){var e=Object(d.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.existsSync("".concat(this.projectPath,"/paths"))||this.fs.mkdirSync("".concat(this.projectPath,"/paths")),a=JSON.stringify(Object(v.a)({},n)),this.fs.writeFileSync("".concat(this.projectPath,"/paths/").concat(t,".json"),a)}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveJsonGroup",value:function(){var e=Object(d.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.existsSync("".concat(this.projectPath,"/groups"))||this.fs.mkdirSync("".concat(this.projectPath,"/groups")),a=JSON.stringify(n),this.fs.writeFileSync("".concat(this.projectPath,"/groups/").concat(t,".json"),a)}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveCSVPath",value:function(){var e=Object(d.a)(f.a.mark((function e(t,n,a){var r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.existsSync(a)||this.fs.mkdirSync(a),this.fs.existsSync("".concat(a,"/").concat(n))&&this.fs.rmdirSync("".concat(a,"/").concat(n),{recursive:!0}),this.fs.mkdirSync("".concat(a,"/").concat(n)),Object.keys(t).filter((function(e){return e.endsWith("Setpoints")})).forEach((function(e){var o="".concat(n,".").concat(e.replace("_","").replace("Setpoints",""),".csv");r.fs.writeFileSync("".concat(a,"/").concat(n,"/").concat(o),K(t[e]))})),this.fs.writeFileSync("".concat(a,"/").concat(n,"/").concat(n,".coords.csv"),q(t))}catch(o){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"deletePath",value:function(){var e=Object(d.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.unlinkSync("".concat(this.projectPath,"/paths/").concat(t,".json")),this.fs.rmdirSync("".concat(n,"/").concat(t),{recursive:!0})}catch(a){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteGroup",value:function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.unlinkSync("".concat(this.projectPath,"/groups/").concat(t,".json"))}catch(n){}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renameJson",value:function(){var e=Object(d.a)(f.a.mark((function e(t,n,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.renameSync("".concat(this.projectPath,"/").concat(a,"/").concat(t,".json"),"".concat(this.projectPath,"/").concat(a,"/").concat(n,".json"))}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),se=void 0;function ue(){return(ue=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se=new ce(t)}catch(n){se=new ee(t)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se.changeProjectFolderPath(t)}catch(n){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(d.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se.saveJsonPath(t,n)}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t){return ve.apply(this,arguments)}function ve(){return(ve=Object(d.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se.deletePath(t,n)}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return(me=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se.deleteGroup(t)}catch(n){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t){return ye.apply(this,arguments)}function ye(){return(ye=Object(d.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se.renameJson(t,n,"paths")}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return(ge=Object(d.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se.renameJson(t,n,"groups")}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){return(je=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se.saveJsonProject(t)}catch(n){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se.loadFieldImage(t)}catch(n){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t,n){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(d.a)(f.a.mark((function e(t,n,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se.saveCSVPath(t,n,a)}catch(r){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(d.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se.saveJsonGroup(t,n)}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke="SET_APP_VERSION",Re="SET_NEW_VERSION",Te="SET_PLATFORM";function Ie(e){return{type:Te,payload:{isWeb:e}}}function Se(e){return{type:ke,payload:{version:e}}}var Me=void 0,De=void 0;function Ne(){return(Ne=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Me=t,De=window.require("electron").ipcRenderer,Me(Ie(!1)),We(),Ve()}catch(n){Me(Ie(!0))}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return Le.apply(this,arguments)}function Le(){return(Le=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,De.invoke("GetAppVersion");case 3:t=e.sent,Me(Se(t)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Ve(){try{De.on("update-downloaded",(function(e,t){var n;Me((n=t.version,{type:Re,payload:{version:n}}))}))}catch(e){}}function Fe(){try{De.invoke("UpdateApp")}catch(e){}}var Ae=n(22),Ge=n(138),He=n(93),Ue=["command+r","alt+r"],_e=["command+f","alt+f"],Je=["command+s","alt+s"],Be=["command+p","alt+p"],Ye=["command+d","alt+d"],Xe=["command+n","alt+n"],ze=["command+m","alt+m"],Ke=["return","enter"],qe=["space"],$e=["esc"];function Qe(e){var t=e.title,n=e.body,a=e.onClose,r=e.show,o=Object(l.useRef)();return Object(l.useEffect)((function(){o.current&&o.current.focus(),r?u.a.bindGlobal(Ke,a):u.a.unbind(Ke,a)})),p.a.createElement(Ge.a,{centered:!0,show:r,onHide:a},t&&p.a.createElement(Ge.a.Header,null,p.a.createElement(Ge.a.Title,null,t)),n&&p.a.createElement(Ge.a.Body,null,n),p.a.createElement(Ge.a.Footer,null,p.a.createElement(He.a,{ref:o,onClick:a},"ok")))}function Ze(e){var t=e.newVersion,n=Object(l.useState)(!0),a=Object(Ae.a)(n,2),r=a[0],o=a[1];return p.a.createElement(Qe,{title:"v".concat(t," is available"),show:r&&void 0!==t,onClose:function(e){o(!1),e&&e.preventDefault(),document.activeElement&&document.activeElement.blur()},body:p.a.createElement("div",null,"There is a new version waiting for you to update to!\nTo update jest go to settings and click on update...")})}var et=n(37);function tt(e,t){var n=e.getContext("2d");n.lineWidth=5,n.clearRect(0,0,e.width,e.height),function(e,t){e.beginPath(),e.rect(t.fieldConfig.topLeftXPixel,t.fieldConfig.topLeftYPixel,t.fieldConfig.widthInPixel,t.fieldConfig.heigthInPixel),e.strokeStyle="blue",e.stroke()}(n,t),t.path&&(t.path.isIllegal()||0===t.path.coords.length?nt(n,t):(function(e,t){e.beginPath(),t.path.coords.forEach((function(n,a){if(t.isPathMode||!(a>t.rangePosition)){var r=n.x/t.fieldConfig.widthPixelToMeter+t.fieldConfig.topLeftXPixel,o=n.y/t.fieldConfig.hightPixelToMeter+t.fieldConfig.topLeftYPixel;0===a?e.moveTo(r,o):e.lineTo(r,o)}})),e.strokeStyle="Yellow",e.stroke()}(n,t),t.isPathMode&&nt(n,t),(void 0!==t.drawRobotInterval||t.rangePosition>0||!t.isPathMode)&&function(e,t){var n=t.rangePosition,a=t.path.coords[n],r=a.x/t.fieldConfig.widthPixelToMeter+t.fieldConfig.topLeftXPixel,o=a.y/t.fieldConfig.hightPixelToMeter+t.fieldConfig.topLeftYPixel;at(e,t,r,o,a.angle)}(n,t)))}function nt(e,t){t.path.waypoints.forEach((function(n,a){var r=n.x/t.fieldConfig.widthPixelToMeter+t.fieldConfig.topLeftXPixel,o=n.y/t.fieldConfig.hightPixelToMeter+t.fieldConfig.topLeftYPixel;e.beginPath(),e.arc(r,o,10,0,2*Math.PI,!1),t.selectedWaypoint===a?e.fillStyle="blue":e.fillStyle="red",e.fill(),a===t.selectedWaypoint&&at(e,t,r,o,t.driveType===Q.Holonomic?n.robotAngle:n.angle)}))}function at(e,t,n,a,r){var o=t.isPathInReverse?-1:1,i=t.robotDrawConfig.length/t.fieldConfig.widthPixelToMeter,c=.6*t.robotDrawConfig.width/t.fieldConfig.hightPixelToMeter,s=o*t.robotDrawConfig.center/t.fieldConfig.widthPixelToMeter;e.beginPath(),e.save(),function(e,t,n,a,r,o,i){var c=t.robotDrawConfig.width/t.fieldConfig.hightPixelToMeter,s=r-n/2,u=o-c/2;e.translate(s+n/2,u+c/2),e.rotate(i),e.fillStyle="white",e.fillRect(-n/2-a,-c/2,n,c)}(e,t,i,s,n,a,Object(et.d2r)(r)),function(e){e.arc(0,0,5,0,2*Math.PI,!1),e.fillStyle="blue",e.fill()}(e),rt(e,o,i,s,c,"blue"),rt(e,o,-i,s,c,"red"),e.restore()}function rt(e,t,n,a,r,o){e.beginPath(),e.moveTo(t*(n/2)-a,-r/2),e.lineTo(t*(n/2)-a,r/2),e.strokeStyle=o,e.stroke()}var ot=n(131),it=n(94),ct=n(28),st=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onChange=function(t){return e.props.setWaypoint(Object(v.a)(Object(v.a)({},e.props.waypoint),t),e.props)},e.onRemove=function(){e.props.removeWaypoint(e.props),e.props.close()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.waypoint,a=t.show,r=t.close,o=t.length,i=t.driveType,c=t.selectedWaypoint;return n?p.a.createElement(Ge.a,{show:a,onHide:r,size:"xl"},p.a.createElement(Ge.a.Header,{closeButton:!0},p.a.createElement(Ge.a.Title,null,"Waypoint ",c+1," info")),p.a.createElement(Ge.a.Body,{style:{display:"flex",textAlignLast:"center"}},p.a.createElement(ot.a.Prepend,null,p.a.createElement(ot.a.Text,null,"X")),p.a.createElement(it.a,{className:"mr-2",defaultValue:n.x,onChange:function(t){return e.onChange({x:Number(t.target.value)})}}),p.a.createElement(ot.a.Prepend,null,p.a.createElement(ot.a.Text,null,"Y")),p.a.createElement(it.a,{className:"mr-2",defaultValue:n.y,onChange:function(t){return e.onChange({y:Number(t.target.value)})}}),p.a.createElement(ot.a.Prepend,null,p.a.createElement(ot.a.Text,null,"Angle")),p.a.createElement(it.a,{className:"mr-2",defaultValue:n.angle,onChange:function(t){return e.onChange({angle:Number(t.target.value)})}}),i===Q.Holonomic&&p.a.createElement(p.a.Fragment,null,p.a.createElement(ot.a.Prepend,null,p.a.createElement(ot.a.Text,null,"Robot Angle")),p.a.createElement(it.a,{className:"mr-2",defaultValue:this.props.waypoint.robotAngle,onChange:function(t){return e.onChange({robotAngle:Number(t.target.value)})}})),p.a.createElement(ot.a.Prepend,null,p.a.createElement(ot.a.Text,null,"V")),p.a.createElement(it.a,{className:"mr-2",defaultValue:n.v,onChange:function(t){return e.onChange({v:Number(t.target.value)})}}),p.a.createElement(ot.a.Prepend,null,p.a.createElement(ot.a.Text,null,"vMax")),p.a.createElement(it.a,{className:"mr-2",defaultValue:n.vMax,onChange:function(t){return e.onChange({vMax:Number(t.target.value)})}}),p.a.createElement(He.a,{className:"mr-2",variant:"danger",onClick:this.onRemove,disabled:o<=2},p.a.createElement(ct.b,null)))):p.a.createElement(p.a.Fragment,null)}}]),n}(p.a.Component),ut=Object(a.b)((function(e){return{paths:e.paths,selected:e.selected,driveType:e.driveType,pathConfig:e.pathConfig,fieldConfig:e.fieldConfig,selectedWaypoint:e.selectedWaypoint,length:e.selected&&e.isPathMode?e.paths[e.selected].waypoints.length:0}}),(function(e){return{setWaypoint:function(){var t=Object(d.a)(f.a.mark((function t(n,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,M(n,a);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),removeWaypoint:function(){var t=Object(d.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,N(n);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}))(st),lt=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).componentDidUpdate=function(){return tt(a.canvas.current,a.props)},a.onWheel=function(e){var t=a.state,n=t.index,r=t.ctrlKey,o=a.props,i=o.waypoints,c=o.setWaypoint,s=o.isPathMode;if(void 0!==n&&s){var u=Object(v.a)({},i[n]);r&&void 0!==i[n].robotAngle?u.robotAngle=i[n].robotAngle+.1*e.deltaY:u.angle=i[n].angle+.1*e.deltaY,c(u,a.props)}},a.onDown=function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r,o,i,c,s,u,l,p,h;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.path,o=n.addWaypoint,i=n.setSelectedWaypoint,c=n.isPathMode,r&&c){e.next=3;break}return e.abrupt("return");case 3:if(s=a.getMousePosition(t),u=s.x,l=s.y,p=a.getWaypointIndex(u,l),h=a.canvas.current,a.props.setSelectedWaypoint(p),a.setState((function(){return{index:p}})),void 0!==p){e.next=10;break}return e.abrupt("return");case 10:if(!a.state.ctrlKey){e.next=15;break}return e.next=13,o({x:u,y:l},p,a.props);case 13:a.setState((function(){return{index:p+1}})),i(p+1);case 15:h.addEventListener("mousemove",a.whileMove),h.addEventListener("mouseup",a.onUp);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.whileMove=function(e){var t=a.state.index,n=a.props,r=n.setWaypoint,o=n.waypoints;r(Object(v.a)(Object(v.a)({},o[t]),a.getMousePosition(e)),a.props)},a.onUp=function(){var e=a.canvas.current;e.removeEventListener("mousemove",a.whileMove),e.removeEventListener("mouseup",a.onUp)},a.ondblclick=function(e){var t=a.props,n=t.path,r=t.isPathMode;if(n&&r){var o=a.getMousePosition(e),i=o.x,c=o.y,s=a.getWaypointIndex(i,c);void 0!==s&&a.setState((function(){return{index:s,showInfo:!0}}))}},a.onClose=function(){return a.setState((function(){return{showInfo:!1}}))},a.onCopy=Object(d.a)(f.a.mark((function e(){var t,n,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.index,r=t.showInfo,void 0!==n&&!r){e.next=3;break}return e.abrupt("return");case 3:return o=a.props.waypoints,e.next=6,navigator.clipboard.writeText(JSON.stringify(o[n]));case 6:case"end":return e.stop()}}),e)}))),a.onPaste=Object(d.a)(f.a.mark((function e(){var t,n,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=a.state,n=t.index,r=t.showInfo,void 0!==n&&!r){e.next=4;break}return e.abrupt("return");case 4:return e.t0=JSON,e.next=7,navigator.clipboard.readText();case 7:return e.t1=e.sent,o=e.t0.parse.call(e.t0,e.t1),e.next=11,a.props.addWaypoint(o,n,a.props);case 11:e.next=15;break;case 13:e.prev=13,e.t2=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])}))),a.getWaypointIndex=function(e,t){var n=e+a.space,r=e-a.space,o=t+a.space,i=t-a.space,c=a.props.waypoints,s=void 0;return c.filter((function(e,t){return n>=e.x&&r<=e.x&&o>=e.y&&i<=e.y&&(s=t,!0)})).length>0?s:void 0},a.getMousePosition=function(e){var t=a.canvas.current,n=t.getBoundingClientRect(),r=t.width/n.width,o=t.height/n.height,i=a.props.fieldConfig,c=i.topLeftXPixel,s=i.topLeftYPixel,u=i.widthPixelToMeter,l=i.hightPixelToMeter,p=((e.clientX-n.left)*r-c)*u,h=((e.clientY-n.top)*o-s)*l;return{x:Number(p.toFixed(3)),y:Number(h.toFixed(3))}},a.state={index:void 0,ctrlKey:!1,showInfo:!1,width:0,height:0},a.canvas=p.a.createRef(),a.space=.15,a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.canvas.current;tt(t,this.props),t.addEventListener("wheel",this.onWheel),t.addEventListener("mousedown",this.onDown),t.addEventListener("dblclick",this.ondblclick),document.oncopy=this.onCopy,document.onpaste=this.onPaste,document.onkeyup=function(t){return e.setState((function(){return{ctrlKey:t.ctrlKey}}))},document.onkeydown=function(t){return e.setState((function(){return{ctrlKey:t.ctrlKey}}))},this.setState((function(){return{width:t.clientWidth,height:t.clientHeight}}))}},{key:"render",value:function(){var e=this.props,t=e.waypoints,n=e.filedImageUrl,a=this.state,r=a.index,o=a.showInfo,i=a.width,c=a.height;return p.a.createElement("div",{className:"FieldView"},p.a.createElement(ut,{show:o,waypoint:t[r],index:r,close:this.onClose}),p.a.createElement("canvas",{className:"FieldImage",ref:this.canvas,height:c,width:i,style:{backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundImage:"url("+n+")"}}))}}]),n}(p.a.Component),pt=Object(a.b)((function(e){return{path:e.path,paths:e.paths,selected:e.selected,driveType:e.driveType,pathConfig:e.pathConfig,isPathMode:e.isPathMode,filedImageUrl:e.imageUrl,fieldConfig:e.fieldConfig,rangePosition:e.rangePosition,robotDrawConfig:e.robotDrawConfig,selectedWaypoint:e.selectedWaypoint,drawRobotInterval:e.drawRobotInterval,listenToMouseClicks:e.listenToMouseClicks,isPathInReverse:!!e.path&&e.path.isReverse(),waypoints:e.selected&&e.isPathMode?e.paths[e.selected].waypoints:{}}}),(function(e){return{setSelectedWaypoint:function(t){return e(function(e){return{type:R,payload:{selectedWaypoint:e}}}(t))},setWaypoint:function(){var t=Object(d.a)(f.a.mark((function t(n,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,M(n,a);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),addWaypoint:function(){var t=Object(d.a)(f.a.mark((function t(n,a,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,I(n,a+1,r);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()}}))(lt),ht=n(24),ft=n(132),dt=n(95),vt=n(133),mt=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).getData=a.getData.bind(Object(ht.a)(a)),a.style={fontSize:20,fontWeight:"bold"},a}return Object(o.a)(n,[{key:"getData",value:function(){return{}}},{key:"getConfigInfo",value:function(){return""}},{key:"getBody",value:function(){return p.a.createElement("div",null)}},{key:"render",value:function(){return p.a.createElement("div",null,p.a.createElement(ft.a,{className:"ml-0 mb-1"},p.a.createElement("span",{style:this.style},this.getConfigInfo())),p.a.createElement(vt.a,null,this.getBody()))}}]),n}(p.a.Component),bt=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={driveType:Q.Tank},a.setDriveType=a.setDriveType.bind(Object(ht.a)(a)),a}return Object(o.a)(n,[{key:"getData",value:function(){return{driveType:this.state.driveType}}},{key:"componentDidMount",value:function(){var e=this;this.props.setElementData("driveType",this.getData),this.setState((function(){return{driveType:e.props.driveType}}))}},{key:"setDriveType",value:function(e){this.setState((function(){return{driveType:Q[e]}}))}},{key:"getConfigInfo",value:function(){return"Path config:"}},{key:"getBody",value:function(){var e=this;return p.a.createElement(ft.a,{className:"mb-3"},Q.driveTypes.map((function(t,n){return p.a.createElement(dt.a,{key:n},p.a.createElement(He.a,{block:!0,onClick:function(){return e.setDriveType(t)},active:e.state.driveType===Q[t]},t))})))}}]),n}(mt),yt=Object(a.b)((function(e){return{driveType:e.driveType}}),(function(e){return{}}))(bt),gt=n(139),jt=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={lastProjectPath:""},a.CSVFolderRef=p.a.createRef(),a.projectFolderRef=p.a.createRef(),a.resetProjectPath=a.resetProjectPath.bind(Object(ht.a)(a)),a.onProjectFolderPathChange=a.onProjectFolderPathChange.bind(Object(ht.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.setElementData("foldersConfig",this.getData),this.props.setElementData("resetProjectPath",this.resetProjectPath),this.setState((function(){return{lastProjectPath:e.props.projectPath}}))}},{key:"getData",value:function(){return{saveCSVTo:this.CSVFolderRef.current.value||this.props.saveCSVTo,projectPath:this.projectFolderRef.current.value}}},{key:"getConfigInfo",value:function(){return"Folders config:"}},{key:"onProjectFolderPathChange",value:function(){le(this.projectFolderRef.current.value)}},{key:"resetProjectPath",value:function(){this.props.projectPath!==this.state.lastProjectPath&&le(this.state.lastProjectPath)}},{key:"getBody",value:function(){return p.a.createElement("div",null,p.a.createElement(gt.a.Row,null,p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(gt.a.Label,null,"Project folder"),p.a.createElement(gt.a.Control,{defaultValue:this.props.projectPath,ref:this.projectFolderRef,onChange:this.onProjectFolderPathChange}))),p.a.createElement(gt.a.Row,null,p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(gt.a.Label,null,"Paths CSV folder:"),p.a.createElement(gt.a.Control,{defaultValue:this.props.saveCSVTo,ref:this.CSVFolderRef}))))}}]),n}(mt),wt=Object(a.b)((function(e){return{projectPath:e.projectPath,saveCSVTo:e.saveCSVTo}}),(function(e){return{}}))(jt),Et=n(140),Pt=n(134),Ot=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).robotWidthRef=p.a.createRef(),a.robotLengthRef=p.a.createRef(),a.robotCenterRef=p.a.createRef(),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.setElementData("robotDrawConfig",this.getData)}},{key:"componentDidUpdate",value:function(){this.robotWidthRef.current.value=this.props.robotDrawConfig.width,this.robotLengthRef.current.value=this.props.robotDrawConfig.length,this.robotCenterRef.current.value=this.props.robotDrawConfig.center}},{key:"getData",value:function(){return{robotDrawConfig:new k(this.robotWidthRef.current.value,this.robotLengthRef.current.value,this.robotCenterRef.current.value)}}},{key:"getConfigInfo",value:function(){return"Robot draw config:"}},{key:"getBody",value:function(){return p.a.createElement(gt.a.Row,null,p.a.createElement(gt.a.Group,{as:dt.a,md:"4"},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null," with bumper ")},p.a.createElement(gt.a.Label,null,"Width")),p.a.createElement(gt.a.Control,{type:"number",ref:this.robotWidthRef,defaultValue:this.props.robotDrawConfig.width})),p.a.createElement(gt.a.Group,{as:dt.a,md:"4"},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null," with bumper ")},p.a.createElement(gt.a.Label,null,"Length")),p.a.createElement(gt.a.Control,{type:"number",ref:this.robotLengthRef,defaultValue:this.props.robotDrawConfig.length})),p.a.createElement(gt.a.Group,{as:dt.a,md:"4"},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null,p.a.createElement("span",{style:{color:"red"}},"back")," "," (-) < ",p.a.createElement("span",{style:{color:"rgb(50, 100, 0)"}}," center ")," < (+) "," ",p.a.createElement("span",{style:{color:"blue"}},"front"))},p.a.createElement(gt.a.Label,null,"Center")),p.a.createElement(gt.a.Control,{type:"number",ref:this.robotCenterRef,defaultValue:this.props.robotDrawConfig.center})))}}]),n}(mt),Ct=Object(a.b)((function(e){return{robotDrawConfig:e.robotDrawConfig}}),(function(e){return{}}))(Ot),xt=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).fieldHeightInPixelRef=p.a.createRef(),a.fieldHeightInMeterRef=p.a.createRef(),a.fieldWidthInPixelRef=p.a.createRef(),a.fieldWidthInMeterRef=p.a.createRef(),a.filedImageNameRef=p.a.createRef(),a.fieldTopLeftXRef=p.a.createRef(),a.fieldTopLeftYRef=p.a.createRef(),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.setElementData("filedConfig",this.getData)}},{key:"componentDidUpdate",value:function(){this.fieldHeightInMeterRef.current.value=this.props.fieldConfig.heightInMeter,this.fieldWidthInMeterRef.current.value=this.props.fieldConfig.widthInMeter,this.fieldTopLeftXRef.current.value=this.props.fieldConfig.topLeftXPixel,this.fieldTopLeftYRef.current.value=this.props.fieldConfig.topLeftYPixel,this.fieldWidthInPixelRef.current.value=this.props.fieldConfig.widthInPixel,this.fieldHeightInPixelRef.current.value=this.props.fieldConfig.heigthInPixel,this.filedImageNameRef.current.value=this.props.filedImageUrl}},{key:"getData",value:function(){return{image:this.filedImageNameRef.current.value,fieldConfig:new x(this.fieldWidthInMeterRef.current.value,this.fieldHeightInMeterRef.current.value,this.fieldTopLeftXRef.current.value,this.fieldTopLeftYRef.current.value,this.fieldWidthInPixelRef.current.value,this.fieldHeightInPixelRef.current.value)}}},{key:"getConfigInfo",value:function(){return"Filed config:"}},{key:"getBody",value:function(){return p.a.createElement("div",null,p.a.createElement(gt.a.Row,null,p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null," In meter ")},p.a.createElement(gt.a.Label,null,"Width")),p.a.createElement(gt.a.Control,{defaultValue:this.props.fieldConfig.widthInMeter,ref:this.fieldWidthInMeterRef,type:"number"})),p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null," In meter ")},p.a.createElement(gt.a.Label,null,"Height")),p.a.createElement(gt.a.Control,{defaultValue:this.props.fieldConfig.heightInMeter,ref:this.fieldHeightInMeterRef,type:"number"}))),p.a.createElement(gt.a.Row,null,p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(gt.a.Label,null,"Image"),p.a.createElement(gt.a.Control,{defaultValue:this.props.filedImageUrl,ref:this.filedImageNameRef}))),p.a.createElement(gt.a.Row,null,p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(gt.a.Label,null,"Top left x"),p.a.createElement(gt.a.Control,{defaultValue:this.props.fieldConfig.topLeftXPixel,ref:this.fieldTopLeftXRef,type:"number"})),p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(gt.a.Label,null,"Top left y"),p.a.createElement(gt.a.Control,{defaultValue:this.props.fieldConfig.topLeftYPixel,ref:this.fieldTopLeftYRef,type:"number"})),p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null," In pixel ")},p.a.createElement(gt.a.Label,null,"Width")),p.a.createElement(gt.a.Control,{defaultValue:this.props.fieldConfig.widthInPixel,ref:this.fieldWidthInPixelRef,type:"number"})),p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null," In pixel ")},p.a.createElement(gt.a.Label,null,"Height")),p.a.createElement(gt.a.Control,{defaultValue:this.props.fieldConfig.heigthInPixel,ref:this.fieldHeightInPixelRef,type:"number"}))))}}]),n}(mt),kt=Object(a.b)((function(e){return{fieldConfig:e.fieldConfig,filedImageUrl:e.image}}),(function(e){return{}}))(xt),Rt=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).pathWidthRef=p.a.createRef(),a.robotMaxVRef=p.a.createRef(),a.pathLengthRef=p.a.createRef(),a.robotMaxAccRef=p.a.createRef(),a.robotLoopTimeRef=p.a.createRef(),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.setElementData("pathConfig",this.getData)}},{key:"componentDidUpdate",value:function(){this.robotMaxVRef.current.value=this.props.pathConfig.vMax,this.pathWidthRef.current.value=this.props.pathConfig.width,this.robotMaxAccRef.current.value=this.props.pathConfig.acc,this.pathLengthRef.current.value=this.props.pathConfig.length,this.robotLoopTimeRef.current.value=this.props.pathConfig.robotLoopTime}},{key:"getData",value:function(){return{pathConfig:new this.props.driveType.PathConfig(Number(this.robotMaxVRef.current.value),Number(this.robotMaxAccRef.current.value),Number(this.pathWidthRef.current.value),Number(this.pathLengthRef.current.value),Number(this.robotLoopTimeRef.current.value))}}},{key:"getBody",value:function(){return p.a.createElement(gt.a.Row,null,p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null," m ")},p.a.createElement(gt.a.Label,null,"Width")),p.a.createElement(gt.a.Control,{type:"number",ref:this.pathWidthRef,defaultValue:this.props.pathConfig.width})),p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null," m ")},p.a.createElement(gt.a.Label,null,"Length")),p.a.createElement(gt.a.Control,{type:"number",ref:this.pathLengthRef,defaultValue:this.props.pathConfig.length})),p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null," m / s ")},p.a.createElement(gt.a.Label,null,"Max V")),p.a.createElement(gt.a.Control,{type:"number",ref:this.robotMaxVRef,defaultValue:this.props.pathConfig.vMax})),p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null," m / s ^ 2 ")},p.a.createElement(gt.a.Label,null,"Max Acc")),p.a.createElement(gt.a.Control,{type:"number",ref:this.robotMaxAccRef,defaultValue:this.props.pathConfig.acc})),p.a.createElement(gt.a.Group,{as:dt.a},p.a.createElement(Et.a,{overlay:p.a.createElement(Pt.a,null," s ")},p.a.createElement(gt.a.Label,null,"Loop time")),p.a.createElement(gt.a.Control,{type:"number",ref:this.robotLoopTimeRef,defaultValue:this.props.pathConfig.robotLoopTime})))}}]),n}(mt),Tt=Object(a.b)((function(e){return{pathConfig:e.pathConfig,driveType:e.driveType}}),(function(e){return{}}))(Rt),It=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).setElementData=function(t,n){e[t]=n},e.saveSettings=function(){var t=Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},e.driveType()),e.pathConfig()),e.filedConfig()),e.robotDrawConfig());e.foldersConfig&&(t=Object.assign(t,e.foldersConfig())),t.image!==e.props.filedImageUrl&&we(t.image),e.props.setSettings(t),e.props.onClose()},e.getUpdateButton=function(){return void 0!==e.props.newVersion?p.a.createElement(He.a,{variant:"outline-success",onClick:Fe},"Update to v".concat(e.props.newVersion)):p.a.createElement("span",null)},e.getAppVersion=function(){return e.props.isWeb?p.a.createElement("span",null):p.a.createElement("div",{style:{fontSize:10}},"v",e.props.version)},e.getFoldersConfig=function(){return e.props.isWeb?p.a.createElement("span",null):p.a.createElement(wt,{setElementData:e.setElementData})},e}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(){this.props.show?u.a.bindGlobal(Ke,this.saveSettings):u.a.unbind(Ke)}},{key:"render",value:function(){return p.a.createElement(Ge.a,{centered:!0,show:this.props.show,onHide:this.props.onClose,backdrop:"static"},p.a.createElement(Ge.a.Header,null,p.a.createElement(Ge.a.Title,null,"Settings")),p.a.createElement(Ge.a.Body,null,p.a.createElement("div",{className:"SettingsBody"},this.getFoldersConfig(),p.a.createElement(yt,{setElementData:this.setElementData}),p.a.createElement(Tt,{setElementData:this.setElementData}),p.a.createElement(kt,{setElementData:this.setElementData}),p.a.createElement(Ct,{setElementData:this.setElementData}),this.getAppVersion())),p.a.createElement(Ge.a.Footer,null,this.getUpdateButton(),p.a.createElement(He.a,{variant:"outline-primary",onClick:this.props.onClose},"cancel"),p.a.createElement(He.a,{onClick:this.saveSettings},"save")))}}]),n}(p.a.Component),St=Object(a.b)((function(e){return{projectPath:e.projectPath,newVersion:e.newVersion,filedImageUrl:e.image,version:e.version,isWeb:e.isWeb}}),(function(e){return{setSettings:function(t){return e(function(e){return{type:g,payload:{settings:e}}}(t))}}}))(It),Mt="CHANGE_LISTEN_TO_MOUSE_STATUS",Dt="SET_DRAW_ROBOT_INTERVAL",Nt="CHANGE_RANGE_POSITION",Wt="CHANGE_MODE";function Lt(e){return{type:Nt,payload:{position:e}}}function Vt(e){return{type:Dt,payload:{interval:e}}}var Ft=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).range=p.a.createRef(),a.changeRangePosition=a.changeRangePosition.bind(Object(ht.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.range.current.value=0,this.range.current.disabled=!0,document.querySelector("canvas").addEventListener("wheel",(function(t){var n=e.props,a=n.selectedWaypoint,r=n.rangePosition;void 0===a&&e.changeRangePosition(r-Math.sign(t.deltaY))}))}},{key:"componentDidUpdate",value:function(){this.props.path?(this.range.current.max=this.props.path.coords.length-1,this.range.current.value=this.props.rangePosition,this.range.current.disabled=!1):(this.range.current.disabled=!0,this.range.current.value=0)}},{key:"changeRangePosition",value:function(e){if(this.props.path){this.props.setDrawRobotInterval();var t=this.props.rangePosition,n=this.props.path.coords.length-1,a=e>=0&&e<=n?e:t;this.props.changeRangePosition(a)}}},{key:"render",value:function(){var e=this,t={fontSize:"12px"},n=this.props,a=n.rangePosition,r=n.robotLoopTime,o=n.path;return p.a.createElement(vt.a,null,p.a.createElement(ft.a,null,p.a.createElement(dt.a,{sm:.5,style:t},o?(r*a).toFixed(2):"0.00"),p.a.createElement(dt.a,null,p.a.createElement(gt.a.Control,{ref:this.range,type:"range",onChange:function(t){return e.changeRangePosition(t.target.value)}})),p.a.createElement(dt.a,{sm:.5,style:t},o&&!o.isIllegal()?((o.coords.length-1)*r).toFixed(2):"0.00")))}}]),n}(p.a.Component),At=Object(a.b)((function(e){return{path:e.path,rangePosition:e.rangePosition,selectedWaypoint:e.selectedWaypoint,robotLoopTime:e.pathConfig.robotLoopTime}}),(function(e){return{changeRangePosition:function(t){return e(Lt(t))},setDrawRobotInterval:function(){return e(Vt())}}}))(Ft),Gt=n(81),Ht=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).componentDidMount=function(){return u.a.bindGlobal(_e,e.onClick)},e.onClick=Object(d.a)(f.a.mark((function t(){var n,a,r,o,i,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,a=n.changeDirection,r=n.path,o=n.paths,i=n.selected,c=n.isPathMode,document.activeElement&&document.activeElement.blur(),c){t.next=4;break}return t.abrupt("return");case 4:if(!r){t.next=7;break}return t.next=7,a(r,o,i);case 7:case"end":return t.stop()}}),t)}))),e.getButtonIcon=function(){return e.props.path&&e.props.isPathReverse?p.a.createElement(Gt.a,{className:"mr-2"}):p.a.createElement(Gt.b,{className:"mr-2"})},e}return Object(o.a)(n,[{key:"render",value:function(){return p.a.createElement(He.a,{size:"lg",className:"mr-3",onClick:this.onClick,disabled:!this.props.path||this.props.path.isTurnInPlace()},this.getButtonIcon(),"in reverse")}}]),n}(p.a.Component),Ut=Object(a.b)((function(e){return{path:e.path,paths:e.paths,selected:e.selected,isPathMode:e.isPathMode,isPathReverse:!!e.selected&&e.paths[e.selected].isInReverse}}),(function(e){return{changeDirection:function(){var t=Object(d.a)(f.a.mark((function t(n,a,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,J(n,a,r);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()}}))(Ht);function _t(e,t,n,a){return e?function(e,t,n){return F.apply(this,arguments)}(t,n,a):{type:ae,payload:{}}}function Jt(e,t,n,a){return e?function(e,t,n){return A.apply(this,arguments)}(t,n,a):{type:ne,payload:{name:a}}}function Bt(e,t,n,a,r){return e?function(e,t,n,a){return G.apply(this,arguments)}(t,n,a,r):ie(r)}var Yt=n(136);function Xt(e){var t=e.title,n=e.variant,a=e.disabled,r=e.body,o=e.onClick,i=e.shortcut;return Object(l.useEffect)((function(){i&&(u.a.unbind(i),u.a.bindGlobal(i,o))})),p.a.createElement(He.a,{size:"lg",className:"mr-2",variant:n,title:t,onClick:o,disabled:a},r)}var zt=n(52),Kt=n(135),qt=function(e){var t=e.style,n=e.title,a=e.id,r=e.items;return p.a.createElement("div",{style:Object(v.a)(Object(v.a)({},t),{},{width:"50%",padding:"10px"})},p.a.createElement("h5",null,n),p.a.createElement(zt.c,{droppableId:a},(function(e,t){return p.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:(n=t.isDraggingOver,{background:n?"lightblue":"white",padding:"10px 8px 0 8px",overflowX:"hidden",borderRadius:"5px",overflowY:"auto",height:"250px"})}),r.map((function(e,t){return p.a.createElement(zt.b,{key:e,draggableId:e,index:t},(function(t,n){return p.a.createElement(Kt.a,Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{variant:n.isDragging?"success":"primary"}),e)}))})),0===r.length&&p.a.createElement("h6",null,"list is empty"),e.placeholder);var n})))},$t=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).reorder=function(e,t){var n=Array.from(a.state[e.droppableId]),r=n.splice(e.index,1),o=Object(Ae.a)(r,1)[0];n.splice(t.index,0,o);var i={};return i[t.droppableId]=n,i},a.move=function(e,t){var n=Array.from(a.state[e.droppableId]),r=Array.from(a.state[t.droppableId]),o=n.splice(e.index,1),i=Object(Ae.a)(o,1)[0];r.splice(t.index,0,i);var c={};return c[e.droppableId]=n,c[t.droppableId]=r,c},a.onDragEnd=function(e){var t=e.source,n=e.destination;n&&(t.droppableId===n.droppableId?a.setState(a.reorder(t,n)):a.setState(a.move(t,n)))},a.onClose=function(e){a.props.onClose(),a.props.updateGroup(e)},a.state={items:[],selected:[]},a}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.paths,a=t.groupPaths;JSON.stringify(e)!==JSON.stringify(this.props)&&this.setState({items:n.filter((function(e){return!a.includes(e)})),selected:a})}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,a=t.selected;return p.a.createElement(Ge.a,{show:n,onHide:function(){return e.onClose(e.state.selected)},size:"lg",centered:!0},p.a.createElement(Ge.a.Header,{closeButton:!0},p.a.createElement(Ge.a.Title,null,"".concat(a," Group Info"))),p.a.createElement(Ge.a.Body,{style:{display:"flex",height:"100%",width:"100%",textAlign:"center"}},p.a.createElement(zt.a,{onDragEnd:this.onDragEnd},p.a.createElement(qt,{id:"items",title:"paths to use",items:this.state.items}),p.a.createElement(qt,{id:"selected",title:"paths in group",items:this.state.selected,style:{margin:"0 0 0 auto"}}))))}}]),n}(p.a.Component),Qt=Object(a.b)((function(e){return{selected:e.selected,paths:Object.keys(e.paths),groupPaths:e.groups[e.selected]?e.groups[e.selected]:[]}}),(function(e){return{updateGroup:function(t){return e(function(e){return{type:re,payload:{group:e}}}(t))}}}))($t);function Zt(e){var t=e.disabled,n=Object(l.useState)(!1),a=Object(Ae.a)(n,2),r=a[0],o=a[1],i=function(e){o(!r),e&&e.preventDefault(),document.activeElement&&document.activeElement.blur()};return p.a.createElement(p.a.Fragment,null,p.a.createElement(Qt,{show:r,onClose:i}),p.a.createElement(Xt,{disabled:t,body:p.a.createElement(Yt.a,null),onClick:i}))}function en(e){var t=e.newVersion,n=Object(l.useState)(!1),a=Object(Ae.a)(n,2),r=a[0],o=a[1];return p.a.createElement(p.a.Fragment,null,p.a.createElement(St,{show:r,onClose:function(){return o(!1)}}),p.a.createElement(Xt,{title:"Settings",onClick:function(e){o(!r),e&&e.preventDefault(),document.activeElement&&document.activeElement.blur()},body:p.a.createElement(ct.a,null),shortcut:Be,variant:t?"success":"primary"}))}function tn(e){var t=e.title,n=e.placeholder,a=e.defaultValue,r=e.onCancel,o=e.onConfirm,i=e.show,c=Object(l.useRef)(),s=function(){return o(c.current?c.current.value:void 0)};return Object(l.useEffect)((function(){c.current&&c.current.focus(),i?u.a.bindGlobal(Ke,s):u.a.unbind(Ke,s)})),p.a.createElement(Ge.a,{centered:!0,show:i,onHide:r},t&&p.a.createElement(Ge.a.Header,null,p.a.createElement(Ge.a.Title,null,t)),p.a.createElement(Ge.a.Body,null,p.a.createElement(it.a,{autoFocus:!0,ref:c,placeholder:n,defaultValue:a})),p.a.createElement(Ge.a.Footer,null,p.a.createElement(He.a,{variant:"outline-primary",onClick:r},"cancel"),p.a.createElement(He.a,{onClick:s},"confirm")))}function nn(e){var t=e.disabled,n=e.isPathMode,a=e.pathName,r=e.onRename,o=Object(l.useState)(!1),i=Object(Ae.a)(o,2),c=i[0],s=i[1],u=function(e){document.activeElement&&document.activeElement.blur(),e&&e.preventDefault(),s(!c)};return p.a.createElement(p.a.Fragment,null,p.a.createElement(tn,{show:c,onCancel:u,onConfirm:function(e){r(e),s(!c)},defaultValue:a,title:"Rename ".concat(n?"path":"group")}),p.a.createElement(Xt,{body:p.a.createElement(ct.c,null),onClick:u,disabled:t,shortcut:Ue,title:"Rename ".concat(n?"path":"group")}))}function an(e){var t=e.title,n=e.body,a=e.onCancel,r=e.onConfirm,o=e.show,i=Object(l.useRef)();return Object(l.useEffect)((function(){return i.current&&i.current.focus()})),p.a.createElement(Ge.a,{centered:!0,show:o,onHide:a},t&&p.a.createElement(Ge.a.Header,null,p.a.createElement(Ge.a.Title,null,t)),n&&p.a.createElement(Ge.a.Body,null,n),p.a.createElement(Ge.a.Footer,null,p.a.createElement(He.a,{ref:i,variant:"outline-primary",onClick:a},"cancel"),p.a.createElement(He.a,{onClick:r},"confirm")))}function rn(e){var t=e.disabled,n=e.isPathMode,a=e.pathName,r=e.onDelete,o=Object(l.useState)(!1),i=Object(Ae.a)(o,2),c=i[0],s=i[1],u=n?"path":"group",h=function(e){document.activeElement&&document.activeElement.blur(),e&&e.preventDefault(),void 0!==a&&s(!c)},v=function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:s(!c);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(p.a.Fragment,null,p.a.createElement(an,{body:"Are you sure you want to delete ".concat(a," ").concat(u,"?"),title:"Delete ".concat(u),show:c,onConfirm:v,onCancel:h}),p.a.createElement(Xt,{variant:"danger",onClick:h,disabled:t,body:p.a.createElement(ct.b,null),title:"Delete ".concat(u),shortcut:Ye}))}function on(e){var t=e.disabled,n=e.isWeb,a=e.saveCSVTo,r=e.pathName,o=e.path,i=e.onExport,c=o&&o.isIllegal(),s=Object(l.useState)(!1),u=Object(Ae.a)(s,2),h=u[0],v=u[1],m=Object(l.useState)(!1),b=Object(Ae.a)(m,2),y=b[0],g=b[1],j=function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(!1));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g(!1));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.preventDefault(),document.activeElement&&document.activeElement.blur(),i(g,v);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p.a.createElement(p.a.Fragment,null,p.a.createElement(Qe,{show:y&&!n,onClose:w,title:"Export path",body:""!==a?"Path ".concat(r," exported successfully!"):"Can't Export path, you need to set export folder path in settings!"}),p.a.createElement(Qe,{title:o&&o.isIllegal()&&o.error.message,show:h,onClose:j,body:p.a.createElement("div",null,o&&o.isIllegal()&&o.error.position&&"".concat(o.error.position,"\n\n"),o&&o.isIllegal()&&o.error.problem&&"".concat(o.error.problem,"\n\n"),o&&o.isIllegal()&&"".concat(o.error.solution,"!"))}),p.a.createElement(Xt,{title:"Export path",disabled:t,onClick:E,shortcut:Je,variant:c?"danger":"primary",body:c?p.a.createElement(ct.d,null):p.a.createElement(Gt.c,null)}))}var cn=n(98),sn=n(137),un=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){return u.a.bindGlobal(Xe,a.changePopupStatus)},a.getItems=function(){var e=a.props,t=e.pathsName,n=e.groups,r=e.isPathMode,o=e.selected;return(r?t:n).map((function(e,t){return p.a.createElement(cn.a.Item,{as:"button",key:t,active:e===o,onClick:function(){return a.setSelected(e)}},e)}))},a.setSelected=function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.changeSelectedGroup,o=n.changeSelectedPath,i=n.isPathMode,document.activeElement&&document.activeElement.blur(),!i){e.next=7;break}return e.next=5,o(t,a.props);case 5:e.next=8;break;case 7:r(t,a.props);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.changePopupStatus=function(){return a.setState((function(e){return{showPopup:!e.showPopup}}))},a.createPath=function(e){var t=a.props,n=t.isPathMode,r=t.paths,o=t.pathConfig,i=t.driveType;a.props.createNewAction(n,r,o,i,e),a.setState({showPopup:!1})},a.state={showPopup:!1},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.showCreateNewPopup,e.isPathMode),n=e.selected,a=n||(t?"Select Path":"Select Group");return p.a.createElement(p.a.Fragment,null,p.a.createElement(tn,{show:this.state.showPopup,onCancel:this.changePopupStatus,onConfirm:this.createPath,placeholder:"".concat(t?"path":"group"," name"),title:"Create new ".concat(t?"path":"group")}),p.a.createElement(sn.a,{className:"ml-3 mr-2",size:"lg",drop:"up",title:a},this.getItems(),p.a.createElement(cn.a.Divider,null),p.a.createElement(cn.a.Item,{as:"button",onClick:this.changePopupStatus},t?"New Path":"New Group")))}}]),n}(p.a.Component),ln=Object(a.b)((function(e){return{pathsName:Object.keys(e.paths),groups:Object.keys(e.groups),isPathMode:e.isPathMode,pathConfig:e.pathConfig,driveType:e.driveType,selected:e.selected,paths:e.paths}}),(function(e){return{changeSelectedGroup:function(t){return e(function(e){return{type:te,payload:{groupName:e}}}(t))},changeSelectedPath:function(){var t=Object(d.a)(f.a.mark((function t(n,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,L(n,a);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),createNewAction:function(){var t=Object(d.a)(f.a.mark((function t(n,a,r,o,i){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,Bt(n,a,r,o,i);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n,a,r,o){return t.apply(this,arguments)}}()}}))(un),pn=n(82);function hn(e){var t=e.isPathMode,n=e.onChangeMode;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Xt,{shortcut:ze,body:t?p.a.createElement(pn.b,null):p.a.createElement(pn.a,null),onClick:function(e){n(),e&&e.preventDefault(),document.activeElement&&document.activeElement.blur()},title:"Change to ".concat(t?"group":"path"," mode")}))}function fn(e){var t=e.path,n=e.body,a=e.onPlay;return p.a.createElement(Xt,{body:n,onClick:function(){null===document.querySelector(".modal-content")&&(document.activeElement&&document.activeElement.blur(),a())},shortcut:qe,disabled:!t||t.waypoints.length<=1||t.isIllegal()})}var dn=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onRename=function(t){var n=e.props,a=n.isPathMode,r=n.pathName,o=n.paths;e.props.onRename(a,o,r,t)},e.onExport=function(t,n){var a=e.props,r=a.driveType,o=a.paths,i=a.path,c=a.saveCSVTo,s=a.isWeb,u=a.isPathMode,l=a.pathName,p=a.group,h=a.pathConfig;if(i)if(""!==c||s)if(i.isIllegal())n(!0);else{(u?[l]:p).forEach((function(e){Pe(new r.Path(o[e].waypoints,h),e,c)})),t(!0)}else t(!0)},e.getPlayButtonIcon=function(){var t=e.props,n=t.drawRobotInterval,a=t.path,r=t.rangePosition;return n?p.a.createElement(ct.e,null):a&&a.coords.length-1===r?p.a.createElement(ct.g,null):p.a.createElement(ct.f,null)},e.onPlay=Object(d.a)(f.a.mark((function t(){var n,a,r,o,i,c,s,u,l,p,h;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,a=n.path,r=n.drawRobotInterval,o=n.rangePosition,i=n.robotLoopTime,c=e.props,s=c.setDrawRobotInterval,u=c.changeRangePosition,l=function(){return a&&a.coords.length-1===o},p=function(){var t=e.props,n=t.path,a=t.rangePosition,r=e.props,o=r.setDrawRobotInterval,i=r.changeRangePosition;n&&n.coords.length-1===a?o():i(a+1)},h=void 0,function(){return a&&!r&&a.coords.length>0}()&&(l()&&u(0),h=setInterval(p,1e3*i)),s(h);case 8:case"end":return t.stop()}}),t)}))),e.onDelete=Object(d.a)(f.a.mark((function t(){var n,a,r,o,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,a=n.paths,r=n.pathName,o=n.saveCSVTo,i=n.isPathMode,e.props.deleteAction(i,a,r,o);case 2:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.driveType,n=e.isPathMode,a=e.path,r=e.newVersion,o=e.pathName,i=e.isWeb,c=e.saveCSVTo,s=this.props.changeMode,u=!a;return p.a.createElement(vt.a,null,p.a.createElement(ft.a,null,p.a.createElement(en,{newVersion:r}),p.a.createElement(hn,{isPathMode:n,onChangeMode:s}),p.a.createElement(ln,null),p.a.createElement(nn,{pathName:o,disabled:u,isPathMode:n,onRename:this.onRename}),p.a.createElement(on,{path:a,isWeb:i,pathName:o,disabled:u,saveCSVTo:c,onExport:this.onExport}),p.a.createElement(fn,{body:this.getPlayButtonIcon(),path:a,onPlay:this.onPlay}),p.a.createElement(rn,{disabled:u,pathName:o,isPathMode:n,onDelete:this.onDelete}),!n&&p.a.createElement(Zt,{disabled:void 0===o}),n&&t!==Q.Holonomic&&p.a.createElement(Ut,null)))}}]),n}(p.a.Component),vn=Object(a.b)((function(e){return{path:e.path,paths:e.paths,isWeb:e.isWeb,pathName:e.selected,saveCSVTo:e.saveCSVTo,driveType:e.driveType,newVersion:e.newVersion,pathConfig:e.pathConfig,isPathMode:e.isPathMode,rangePosition:e.rangePosition,group:e.groups[e.selected],drawRobotInterval:e.drawRobotInterval,robotLoopTime:e.pathConfig.robotLoopTime}}),(function(e){return{setDrawRobotInterval:function(t){return e(Vt(t))},changeRangePosition:function(t){return e(Lt(t))},changeMode:function(){return e({type:Wt,payload:{}})},deleteAction:function(){var t=Object(d.a)(f.a.mark((function t(n,a,r,o){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,_t(n,a,r,o);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),onRename:function(){var t=Object(d.a)(f.a.mark((function t(n,a,r,o){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,Jt(n,a,r,o);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}()}}))(dn),mn=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){!function(e){Ne.apply(this,arguments)}(this.props.dispatch),function(e){ue.apply(this,arguments)}(this.props.dispatch),u.a.bindGlobal($e,(function(){document.activeElement&&document.activeElement.blur()}))}},{key:"render",value:function(){return p.a.createElement("div",{className:"App"},p.a.createElement(Ze,{newVersion:this.props.newVersion}),p.a.createElement(St,null),p.a.createElement(pt,null),p.a.createElement("div",{id:"bottom"},p.a.createElement(At,null),p.a.createElement(vn,null)))}}]),n}(p.a.Component),bn=Object(a.b)((function(e){return{isPathMode:e.isPathMode,newVersion:e.newVersion}}),(function(e){return{dispatch:function(t){return e(t)}}}))(mn),yn=n(21),gn=n.n(yn),jn=n(26),wn=n(96),En=n(97),Pn={drawRobotInterval:void 0,selected:void 0,rangePosition:0,isPathMode:!0,groups:{},selectedWaypoint:void 0,driveType:Q.Tank,path:void 0,paths:{},robotDrawConfig:new k,pathConfig:new Q.Tank.PathConfig,fieldConfig:new x,projectPath:"",saveCSVTo:"",imageUrl:"",image:"",newVersion:void 0,version:"0.0.0",isWeb:!0};function On(e,t){return function(e){je.apply(this,arguments)}(t.settings),Object(v.a)(Object(v.a)(Object(v.a)({},e),t.settings),{},{selected:void 0,path:void 0,listenToMouseClicks:!1})}var Cn=n(72);function xn(e){var t={coords:[],waypoints:[],sourceSetpoints:[],isIllegal:function(){return!1},isReverse:function(){return!1}};return e.groups[e.selected].forEach((function(n){if(e.paths[n]){var a=new e.driveType.Path(e.paths[n].waypoints,e.pathConfig);a.isIllegal()?function(e,t){!function(e,t){e.coords=[],e.waypoints=[],e.sourceSetpoints=[],e.isIllegal=function(){return!0}}(e),e.error={info:"Illegal Path In Group!",problem:"There is illegal path!",solution:"Fix the illegal path!"}}(t):function(e,t,n,a){var r,o,i;(r=t.sourceSetpoints).push.apply(r,Object(Cn.a)(n.sourceSetpoints)),(o=t.waypoints).push.apply(o,Object(Cn.a)(n.waypoints));var c=n.coords;e.paths[a].isInReverse&&n.coords.forEach((function(e){e.angle+=Q.Util.d2r(180)})),(i=t.coords).push.apply(i,Object(Cn.a)(c))}(e,t,a,n)}else{var r=e.groups[e.selected].indexOf(n);r>=0&&e.groups[e.selected].splice(r,1)}})),Object(v.a)(Object(v.a)({},e),{},{path:t})}function kn(e,t){var n=Object(v.a)(Object(v.a)({},e),{},{selected:void 0,path:void 0});return delete n.groups[e.selected],function(e){me.apply(this,arguments)}(e.selected),n}function Rn(e,t){var n=Object(v.a)(Object(v.a)({},e),{},{selected:t.name});return t.name!==e.selected&&(!function(e,t){ge.apply(this,arguments)}(e.selected,t.name),n.groups[t.name]=n.groups[e.selected],delete n.groups[e.selected]),n}function Tn(e,t){return Object(v.a)(Object(v.a)({},e),{},{rangePosition:Number(t.position)})}function In(e,t){return!e.drawRobotInterval&&t.interval?Object(v.a)(Object(v.a)({},e),{},{drawRobotInterval:t.interval,selectedWaypoint:void 0}):(clearInterval(e.drawRobotInterval),Object(v.a)(Object(v.a)({},e),{},{drawRobotInterval:void 0,selectedWaypoint:void 0}))}var Sn=function(e,t){return Object(v.a)(Object(v.a)({},e),t)};var Mn=Object(wn.a)(Pn,(function(e,t){return t.type!==Dt&&t.type!==Nt&&(e=Tn(e=In(e,{}),{position:0})),t.type===Wt?function(e,t){return Object(v.a)(Object(v.a)({},e),{},{isPathMode:!e.isPathMode,listenToMouseClicks:!1,selected:void 0,path:void 0})}(e,t.payload):t.type===Nt?Tn(e,t.payload):t.type===Dt?In(e,t.payload):t.type===Mt?function(e,t){var n=void 0!==e.addWaypointInIndex?void 0:t.index,a=void 0!==t.index||!e.listenToMouseClicks;return Object(v.a)(Object(v.a)({},e),{},{listenToMouseClicks:a,addWaypointInIndex:n})}(e,t.payload):e}),(function(e,t){return t.type===T?function(e,t){var n=e.driveType,a=e.paths,r=t.waypoints,o=t.name,i=t.isInReverse;return r=r.map((function(e){return Object.assign(new n.Waypoint,e)})),a[o]={waypoints:r,isInReverse:i},Sn(e,{waypoints:r,paths:a})}(e,t.payload):t.type===R?Sn(e,t.payload):e}),(function(e,t){return t.type===w?function(e,t){return Object(v.a)(Object(v.a)({},e),{},{image:t.image,imageUrl:t.imageUrl})}(e,t.payload):t.type===j?function(e,t){return Object(v.a)(Object(v.a)({},e),{},{saveCSVTo:t.path})}(e,t.payload):t.type===g?On(e,t.payload):t.type===b?function(e,t){return Object(v.a)(Object(v.a)({},e),{},{projectPath:t.projectPath,selected:void 0,paths:{}})}(e,t.payload):t.type===y?function(e,t){return Object(v.a)(Object(v.a)({},e),{},{fieldConfig:t.fieldConfig})}(e,t.payload):t.type===m?function(e,t){return Object(v.a)(Object(v.a)({},e),{},{robotDrawConfig:t.robotDrawConfig})}(e,t.payload):e}),(function(e,t){return t.type===Te?function(e,t){return Object(v.a)(Object(v.a)({},e),{},{isWeb:t.isWeb})}(e,t.payload):t.type===ke?function(e,t){return Object(v.a)(Object(v.a)({},e),{},{version:t.version})}(e,t.payload):t.type===Re?function(e,t){return Object(v.a)(Object(v.a)({},e),{},{newVersion:t.version})}(e,t.payload):e}),(function(e,t){return t.type===te?function(e,t){return xn(Object(v.a)(Object(v.a)({},e),{},{selected:t.groupName}))}(e,t.payload):t.type===re?function(e,t){var n=Object(v.a)({},e);return n.groups[n.selected]=t.group,Ce(n.selected,n.groups[n.selected]),xn(n)}(e,t.payload):t.type===ne?Rn(e,t.payload):t.type===ae?kn(e,t.payload):t.type===oe?function(e,t){var n=Object(v.a)({},e),a=t.paths?t.paths:[];return n.groups[t.name]=a,t.paths||(n.path=void 0,n.selected=t.name,Ce(n.selected,n.groups[e.selected])),n}(e,t.payload):e}));var Dn=Object(jn.d)(Mn,Object(jn.a)(En.a));n(125);gn.a.render(p.a.createElement(a.a,{store:Dn},p.a.createElement(bn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[126,1,2]]]);
//# sourceMappingURL=main.c0b504fc.chunk.js.map