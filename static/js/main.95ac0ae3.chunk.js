(this["webpackJsonppath-generator-app"]=this["webpackJsonppath-generator-app"]||[]).push([[0],{112:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(82);var n=a(14),r=a(8),o=a(10),i=a(13),s=a(12),c=a(4),l=a.n(c),u=a(15),p=a(9);function h(e){return{type:"SET_FIELD_CONFIG",payload:{fieldConfig:e}}}function f(e,t){return{type:"SET_IMAGE",payload:{imageUrl:e,image:t}}}function d(e){return{type:"SET_CSV_PATH",payload:{path:e}}}function v(e){return{type:"SET_ROBOT_DRAW_CONFIG",payload:{robotDrawConfig:e}}}var m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16.5354,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8.001,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Object(r.a)(this,e),this.widthInMeter=Number(t),this.heightInMeter=Number(a),this.topLeftXPixel=Number(n),this.topLeftYPixel=Number(o),this.widthInPixel=Number(i),this.heigthInPixel=Number(s),this.widthPixelToMeter=0===i?0:t/i,this.hightPixelToMeter=0===s?0:a/s},b=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,e),this.center=Number(n),this.length=Number(a),this.width=Number(t)};function y(e,t){return{type:"SET_WAYPOINT",payload:{waypoint:e,index:t}}}function g(e){return{type:"REMOVE_WAYPOINT",payload:{index:e}}}function P(e,t,a){return{type:"ADD_PATH",payload:{name:e,waypoints:t,isInReverse:a}}}function j(e,t){return{type:"SET_PATH_CONFIG",payload:{pathConfig:e,driveType:t}}}var E=a(16);function C(e){var t=[],a=e.map((function(e,a){return 0===a&&(t=function(e){return Object.keys(e).sort()}(e)),function(e,t){return t.map((function(t){return e[t]})).join(",")+","}(e,t)}));return"".concat(t.join(","),",\n").concat(a.join("\n"))}function w(e){var t=e.coords.map((function(e){return O(e)}));return O()+t.join("\n")}function O(e){return e?"".concat(E.Util.r2d(e.angle),",").concat(e.x,",").concat(e.y,","):"Angle,X,Y,\n"}var k=a(75),T=function(){function e(t){Object(r.a)(this,e),this.dispatch=t,this.load()}return Object(o.a)(e,[{key:"load",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadJsonProject(),this.loadRobotDrawConfig(),this.loadFieldConfig(),this.loadFieldImage(),this.loadPathConfig(),this.loadPaths();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadJsonProject",value:function(){try{this.jsonProject=JSON.parse(localStorage.getItem("project settings"))}catch(e){this.jsonProject=void 0}}},{key:"loadRobotDrawConfig",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new b,this.jsonProject&&this.jsonProject.robotDrawConfig&&(t=Object.assign(new b,this.jsonProject.robotDrawConfig)),this.dispatch(v(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFieldConfig",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new m,this.jsonProject&&this.jsonProject.fieldConfig&&(t=Object.assign(new m,this.jsonProject.fieldConfig)),this.dispatch(h(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFieldImage",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=t||this.jsonProject.image,this.dispatch(f(t,t))}catch(a){this.dispatch(f("",""))}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadPathConfig",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.jsonProject.driveType=this.jsonProject.driveType?this.jsonProject.driveType:"tank",t="swerve"===this.jsonProject.driveType?E.Swerve:E.Tank,a=this.jsonProject.pathConfig?this.jsonProject.pathConfig:{},this.dispatch(j(a,t))}catch(n){this.dispatch(j(new E.Tank.PathConfig,E.Tank))}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadPaths",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.keys(localStorage).forEach((function(e){e.startsWith("path/")&&t.loadPath(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadPath",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=JSON.parse(localStorage.getItem(t)),this.dispatch(P(t.replace("path/",""),a.waypoints,a.isInReverse))}catch(n){}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveJsonProject",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=Object(p.a)({},t)).driveType=t.driveType===E.Swerve?"swerve":"tank",localStorage.setItem("project settings",JSON.stringify(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveJsonPath",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={isInReverse:a.isReverse(),waypoints:a.waypoints},localStorage.setItem("path/".concat(t),JSON.stringify(n));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"saveCSVPath",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,o,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new k,r=n.folder(a),Object.keys(t).forEach((function(e){if(e.endsWith("Setpoints")){var n="".concat(a,".").concat(e.replace("_","").replace("Setpoints",""),".csv");r.file(n,C(t[e]))}})),r.file("".concat(a,".coords.csv"),w(t)),e.next=7,n.generateAsync({type:"blob"});case 7:o=e.sent,i=URL.createObjectURL(o),(s=document.createElement("a")).download="".concat(a,".zip"),s.href=i,s.click(),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deletePath",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("path/".concat(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"renameJsonPath",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=localStorage.getItem("path/".concat(t)),localStorage.setItem("path/".concat(a),n),localStorage.removeItem("path/".concat(t));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}();function R(e){return{type:"CHANGE_RANGE_POSITION",payload:{position:e}}}function S(e){return{type:"SET_DRAW_ROBOT_INTERVAL",payload:{interval:e}}}function x(e){return{type:"CHANGE_POPUPS_STATUS",payload:{popup:e}}}function I(e){return{type:"CHANGE_LISTEN_TO_MOUSE_STATUS",payload:{index:e}}}var N=function(){function e(t){Object(r.a)(this,e),this.ipcRenderer=window.require("electron").ipcRenderer,this.fs=window.require("fs"),this.dispatch=t,this.projectPath="",this.load()}return Object(o.a)(e,[{key:"load",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setProjectFolderPath();case 2:this.loadJsonProject(),this.setCSVFolderPath(),this.loadRobotDrawConfig(),this.loadFieldConfig(),this.loadFieldImage(),this.loadPathConfig(),this.loadPaths();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeProjectFolderPath",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ipcRenderer.invoke("UpdateProjctPath",t);case 2:this.load();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setProjectFolderPath",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ipcRenderer.invoke("GetProjctPath");case 2:this.projectPath=e.sent,this.dispatch({type:"SET_PROJECT_PATH",payload:{projectPath:this.projectPath}});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCSVFolderPath",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.jsonProject&&this.jsonProject.saveCSVTo&&""!==this.jsonProject.saveCSVTo?this.dispatch(d(this.jsonProject.saveCSVTo)):this.dispatch(d("".concat(this.projectPath,"/csv")));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadJsonProject",value:function(){try{var e=this.fs.readFileSync("".concat(this.projectPath,"/PathGenerator.json"));this.jsonProject=JSON.parse(e)}catch(t){this.jsonProject=void 0}}},{key:"loadRobotDrawConfig",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new b,this.jsonProject&&this.jsonProject.robotDrawConfig&&(t=Object.assign(new b,this.jsonProject.robotDrawConfig)),this.dispatch(v(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFieldConfig",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new m,this.jsonProject&&this.jsonProject.fieldConfig&&(t=Object.assign(new m,this.jsonProject.fieldConfig)),this.dispatch(h(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFieldImage",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=t||this.jsonProject.image).startsWith("http")){e.next=5;break}return this.dispatch(f(t,t)),e.abrupt("return");case 5:a="",a=-1===t.indexOf("/")?"".concat(this.projectPath,"/").concat(t):t,n=this.fs.readFileSync(a),r=URL.createObjectURL(new Blob([n])),this.dispatch(f(r,t)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.dispatch(f("",""));case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadPathConfig",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.jsonProject.driveType=this.jsonProject.driveType?this.jsonProject.driveType:"tank",t="swerve"===this.jsonProject.driveType?E.Swerve:E.Tank,a=this.jsonProject.pathConfig?this.jsonProject.pathConfig:{},this.dispatch(j(a,t))}catch(n){this.dispatch(j(new E.Tank.PathConfig,E.Tank))}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadPaths",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.readdirSync("".concat(this.projectPath,"/paths")).forEach(function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.endsWith(".json")&&t.loadPath(a);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadPath",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=this.fs.readFileSync("".concat(this.projectPath,"/paths/").concat(t)),n=JSON.parse(a),this.dispatch(P(t.replace(".json",""),n.waypoints,n.isInReverse))}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveJsonProject",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(a=Object(p.a)({},t)).driveType=t.driveType===E.Swerve?"swerve":"tank",delete a.projectPath,n=JSON.stringify(a),this.fs.existsSync(this.projectPath)||this.fs.mkdirSync(this.projectPath),this.fs.writeFileSync("".concat(this.projectPath,"/PathGenerator.json"),n)}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveJsonPath",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.existsSync("".concat(this.projectPath,"/paths"))||this.fs.mkdirSync("".concat(this.projectPath,"/paths")),n=JSON.stringify({isInReverse:a.isReverse(),waypoints:a.waypoints}),this.fs.writeFileSync("".concat(this.projectPath,"/paths/").concat(t,".json"),n)}catch(r){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"saveCSVPath",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a,n){var r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.existsSync(n)||this.fs.mkdirSync(n),this.fs.existsSync("".concat(n,"/").concat(a))&&this.fs.rmdirSync("".concat(n,"/").concat(a),{recursive:!0}),this.fs.mkdirSync("".concat(n,"/").concat(a)),Object.keys(t).filter((function(e){return e.endsWith("Setpoints")})).forEach((function(e){var o="".concat(a,".").concat(e.replace("_","").replace("Setpoints",""),".csv");r.fs.writeFileSync("".concat(n,"/").concat(a,"/").concat(o),C(t[e]))})),this.fs.writeFileSync("".concat(n,"/").concat(a,"/").concat(a,".coords.csv"),w(t)),this.dispatch(x("savePathToCSVPopup"))}catch(o){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"deletePath",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.unlinkSync("".concat(this.projectPath,"/paths/").concat(t,".json")),this.fs.rmdirSync("".concat(a,"/").concat(t),{recursive:!0})}catch(n){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"renameJsonPath",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.fs.renameSync("".concat(this.projectPath,"/paths/").concat(t,".json"),"".concat(this.projectPath,"/paths/").concat(a,".json"))}catch(n){}case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),D=void 0;function M(){return(M=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{D=new N(t)}catch(a){D=new T(t)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{D.changeProjectFolderPath(t)}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{D.saveJsonPath(t,a)}catch(n){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{D.deletePath(t,a)}catch(n){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{D.renameJsonPath(t,a)}catch(n){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{D.saveJsonProject(t)}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{D.loadFieldImage(t)}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(u.a)(l.a.mark((function e(t,a,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{D.saveCSVPath(t,a,n)}catch(r){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return{type:"SET_PLATFORM",payload:{isWeb:e}}}function J(e){return{type:"SET_APP_VERSION",payload:{version:e}}}var Y=void 0,X=void 0;function z(){return(z=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Y=t,X=window.require("electron").ipcRenderer,Y(B(!1)),q(),K()}catch(a){Y(B(!0))}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return $.apply(this,arguments)}function $(){return($=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.invoke("GetAppVersion");case 3:t=e.sent,Y(J(t)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function K(){try{X.on("update-downloaded",(function(e,t){Y({type:"SET_NEW_VERSION",payload:{version:t.version}})}))}catch(e){}}function Q(){try{X.invoke("UpdateApp")}catch(e){}}var Z=a(7),ee=a(118),te=a(119),ae=a(76),ne=a(77),re=a(21),oe=a(1),ie=a.n(oe),se=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={id:-1,pathName:void 0,waypointsLength:-1},n.x=ie.a.createRef(),n.y=ie.a.createRef(),n.v=ie.a.createRef(),n.vMax=ie.a.createRef(),n.angle=ie.a.createRef(),n.addRef=ie.a.createRef(),n.deleteRef=ie.a.createRef(),n.robotAngle=ie.a.createRef(),n.add=n.add.bind(Object(Z.a)(n)),n.remove=n.remove.bind(Object(Z.a)(n)),n.onChange=n.onChange.bind(Object(Z.a)(n)),n.getValue=n.getValue.bind(Object(Z.a)(n)),n.isNeedToUpdateState=n.isNeedToUpdateState.bind(Object(Z.a)(n)),n}return Object(o.a)(a,[{key:"isNeedToUpdateState",value:function(){return this.state.id!==this.props.id||this.state.pathName!==this.props.pathName||this.state.waypointsLength!==this.props.waypointsLength}},{key:"getValue",value:function(e,t){return this.isNeedToUpdateState()?t:e.endsWith(".")?e:t}},{key:"componentDidUpdate",value:function(){var e=this;this.vMax.current.value=this.getValue(this.vMax.current.value,this.props.waypoint.vMax),this.x.current.value=this.getValue(this.x.current.value,this.props.waypoint.x),this.y.current.value=this.getValue(this.y.current.value,this.props.waypoint.y),this.v.current.value=this.getValue(this.v.current.value,this.props.waypoint.v),this.isNeedToUpdateState()&&this.setState((function(){return{id:e.props.id,pathName:e.props.pathName,waypointsLength:e.props.waypointsLength}}))}},{key:"onChange",value:function(){var e={x:Number(this.x.current.value),y:Number(this.y.current.value),v:Number(this.v.current.value),vMax:Number(this.vMax.current.value),angle:Number(this.angle.current.value),robotAngle:Number(this.robotAngle.current.value)};this.props.setWaypoint(e,this.props.id)}},{key:"remove",value:function(){this.deleteRef.current.blur(),this.props.removeWaypoint(this.props.id)}},{key:"add",value:function(){this.addRef.current.blur(),this.props.changeListenToMouseStatus(this.props.id)}},{key:"render",value:function(){return ie.a.createElement(ee.a,{className:this.props.id>0?"mb-0 mt-2":"mb-0 mt-0",variant:"primary"},ie.a.createElement(te.a,null,ie.a.createElement("span",{className:"mr-4"}," ",this.props.id+1," "),ie.a.createElement(te.a.Prepend,null,ie.a.createElement(te.a.Text,null,"X")),ie.a.createElement(ae.a,{className:"mr-2",ref:this.x,defaultValue:this.props.waypoint.x,onChange:this.onChange}),ie.a.createElement(te.a.Prepend,null,ie.a.createElement(te.a.Text,null,"Y")),ie.a.createElement(ae.a,{className:"mr-2",ref:this.y,defaultValue:this.props.waypoint.y,onChange:this.onChange}),ie.a.createElement(te.a.Prepend,null,ie.a.createElement(te.a.Text,null,"Path Angle")),ie.a.createElement(ae.a,{className:"mr-2",ref:this.angle,defaultValue:this.props.waypoint.angle,onChange:this.onChange}),ie.a.createElement(te.a.Prepend,null,ie.a.createElement(te.a.Text,null,"Robot Angle")),ie.a.createElement(ae.a,{className:"mr-2",ref:this.robotAngle,defaultValue:this.props.waypoint.robotAngle,onChange:this.onChange}),ie.a.createElement(te.a.Prepend,null,ie.a.createElement(te.a.Text,null,"V")),ie.a.createElement(ae.a,{className:"mr-2",ref:this.v,defaultValue:this.props.waypoint.v,onChange:this.onChange}),ie.a.createElement(te.a.Prepend,null,ie.a.createElement(te.a.Text,null,"vMax")),ie.a.createElement(ae.a,{className:"mr-2",ref:this.vMax,defaultValue:this.props.waypoint.vMax,onChange:this.onChange}),ie.a.createElement(ne.a,{ref:this.deleteRef,className:"mr-2",variant:"danger",onClick:this.remove},ie.a.createElement(re.c,null)),ie.a.createElement(ne.a,{ref:this.addRef,onClick:this.add,variant:this.props.color},ie.a.createElement(re.a,null))))}}]),a}(ie.a.Component),ce=Object(n.b)((function(e){return{pathName:e.selectedPath}}),(function(e){return{changeListenToMouseStatus:function(t){return e(I(t))},setWaypoint:function(t,a){return e(y(t,a))},removeWaypoint:function(t){return e(g(t))}}}))(se),le=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={id:-1,pathName:void 0,waypointsLength:-1},n.x=ie.a.createRef(),n.y=ie.a.createRef(),n.v=ie.a.createRef(),n.vMax=ie.a.createRef(),n.angle=ie.a.createRef(),n.addRef=ie.a.createRef(),n.deleteRef=ie.a.createRef(),n.add=n.add.bind(Object(Z.a)(n)),n.remove=n.remove.bind(Object(Z.a)(n)),n.onChange=n.onChange.bind(Object(Z.a)(n)),n.getValue=n.getValue.bind(Object(Z.a)(n)),n.isNeedToUpdateState=n.isNeedToUpdateState.bind(Object(Z.a)(n)),n}return Object(o.a)(a,[{key:"isNeedToUpdateState",value:function(){return this.state.id!==this.props.id||this.state.pathName!==this.props.pathName||this.state.waypointsLength!==this.props.waypointsLength}},{key:"getValue",value:function(e,t){return this.isNeedToUpdateState()?t:e.endsWith(".")?e:t}},{key:"componentDidUpdate",value:function(){var e=this;this.vMax.current.value=this.getValue(this.vMax.current.value,this.props.waypoint.vMax),this.x.current.value=this.getValue(this.x.current.value,this.props.waypoint.x),this.y.current.value=this.getValue(this.y.current.value,this.props.waypoint.y),this.v.current.value=this.getValue(this.v.current.value,this.props.waypoint.v),this.isNeedToUpdateState()&&this.setState((function(){return{id:e.props.id,pathName:e.props.pathName,waypointsLength:e.props.waypointsLength}}))}},{key:"onChange",value:function(){var e={x:Number(this.x.current.value),y:Number(this.y.current.value),v:Number(this.v.current.value),vMax:Number(this.vMax.current.value),angle:Number(this.angle.current.value)};this.props.setWaypoint(e,this.props.id)}},{key:"remove",value:function(){this.deleteRef.current.blur(),this.props.removeWaypoint(this.props.id)}},{key:"add",value:function(){this.addRef.current.blur(),this.props.changeListenToMouseStatus(this.props.id)}},{key:"render",value:function(){return ie.a.createElement(ee.a,{className:this.props.id>0?"mb-0 mt-2":"mb-0 mt-0",variant:"primary"},ie.a.createElement(te.a,null,ie.a.createElement("span",{className:"mr-4"}," ",this.props.id+1," "),ie.a.createElement(te.a.Prepend,null,ie.a.createElement(te.a.Text,null,"X")),ie.a.createElement(ae.a,{className:"mr-2",ref:this.x,defaultValue:this.props.waypoint.x,onChange:this.onChange}),ie.a.createElement(te.a.Prepend,null,ie.a.createElement(te.a.Text,null,"Y")),ie.a.createElement(ae.a,{className:"mr-2",ref:this.y,defaultValue:this.props.waypoint.y,onChange:this.onChange}),ie.a.createElement(te.a.Prepend,null,ie.a.createElement(te.a.Text,null,"Angle")),ie.a.createElement(ae.a,{className:"mr-2",ref:this.angle,defaultValue:this.props.waypoint.angle,onChange:this.onChange}),ie.a.createElement(te.a.Prepend,null,ie.a.createElement(te.a.Text,null,"V")),ie.a.createElement(ae.a,{className:"mr-2",ref:this.v,defaultValue:this.props.waypoint.v,onChange:this.onChange}),ie.a.createElement(te.a.Prepend,null,ie.a.createElement(te.a.Text,null,"vMax")),ie.a.createElement(ae.a,{className:"mr-2",ref:this.vMax,defaultValue:this.props.waypoint.vMax,onChange:this.onChange}),ie.a.createElement(ne.a,{ref:this.deleteRef,className:"mr-2",variant:"danger",onClick:this.remove},ie.a.createElement(re.c,null)),ie.a.createElement(ne.a,{ref:this.addRef,onClick:this.add,variant:this.props.color},ie.a.createElement(re.a,null))))}}]),a}(ie.a.Component),ue=Object(n.b)((function(e){return{pathName:e.selectedPath}}),(function(e){return{changeListenToMouseStatus:function(t){return e(I(t))},setWaypoint:function(t,a){return e(y(t,a))},removeWaypoint:function(t){return e(g(t))}}}))(le),pe=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getSwerveWaypointInfo=n.getSwerveWaypointInfo.bind(Object(Z.a)(n)),n.getTankWaypointInfo=n.getTankWaypointInfo.bind(Object(Z.a)(n)),n.getWaypointInfo=n.getWaypointInfo.bind(Object(Z.a)(n)),n}return Object(o.a)(a,[{key:"getTankWaypointInfo",value:function(e,t){return ie.a.createElement(ue,{id:t,key:t,waypoint:e,waypointsLength:this.props.path.waypoints.length,color:t===this.props.addWaypointInIndex?"success":"primary"})}},{key:"getSwerveWaypointInfo",value:function(e,t){return ie.a.createElement(ce,{id:t,key:t,waypoint:e,waypointsLength:this.props.path.waypoints.length,color:t===this.props.addWaypointInIndex?"success":"primary"})}},{key:"getWaypointInfo",value:function(e,t){return this.props.driveType===E.Tank?this.getTankWaypointInfo(e,t):this.props.driveType===E.Swerve?this.getSwerveWaypointInfo(e,t):ie.a.createElement("span",null)}},{key:"render",value:function(){var e=this;return ie.a.createElement("div",{className:"WaypointsList"},this.props.path?this.props.path.waypoints.map((function(t,a){return e.getWaypointInfo(t,a)})):ie.a.createElement("span",null,"There is no waypoints..."))}}]),a}(ie.a.Component),he=Object(n.b)((function(e){return{driveType:e.driveType,path:e.paths[e.selectedPath],addWaypointInIndex:e.addWaypointInIndex}}),(function(e){return{}}))(pe);function fe(e,t){var a=e.getContext("2d");a.clearRect(0,0,e.width,e.height),function(e,t){e.beginPath(),e.rect(t.fieldConfig.topLeftXPixel,t.fieldConfig.topLeftYPixel,t.fieldConfig.widthInPixel,t.fieldConfig.heigthInPixel),e.strokeStyle="blue",e.stroke()}(a,t),t.path&&(t.path.isIllegal()||0===t.path.coords.length?de(a,t):(function(e,t){e.beginPath(),t.path.coords.forEach((function(a,n){var r=a.x/t.fieldConfig.widthPixelToMeter+t.fieldConfig.topLeftXPixel,o=a.y/t.fieldConfig.hightPixelToMeter+t.fieldConfig.topLeftYPixel;0===n?e.moveTo(r,o):e.lineTo(r,o)})),e.strokeStyle="Yellow",e.stroke()}(a,t),de(a,t),function(e,t){var a=t.isPathInReverse?-1:1,n=t.robotDrawConfig.length/t.fieldConfig.widthPixelToMeter,r=.6*t.robotDrawConfig.width/t.fieldConfig.hightPixelToMeter,o=a*t.robotDrawConfig.center/t.fieldConfig.widthPixelToMeter;e.beginPath(),e.save(),function(e,t,a,n){var r=t.rangePosition,o=t.robotDrawConfig.width/t.fieldConfig.hightPixelToMeter,i=t.path.coords[r].x/t.fieldConfig.widthPixelToMeter-a/2+t.fieldConfig.topLeftXPixel,s=t.path.coords[r].y/t.fieldConfig.hightPixelToMeter-o/2+t.fieldConfig.topLeftYPixel;e.translate(i+a/2,s+o/2),e.rotate(t.path.coords[r].angle),e.fillStyle="white",e.fillRect(-a/2-n,-o/2,a,o)}(e,t,n,o),function(e){e.arc(0,0,1.5,0,2*Math.PI,!1),e.fillStyle="rgb(50, 100, 0)",e.fill()}(e),ve(e,a,n,o,r,"blue"),ve(e,a,-n,o,r,"red"),e.restore()}(a,t)))}function de(e,t){t.path.waypoints.forEach((function(a){var n=a.x/t.fieldConfig.widthPixelToMeter+t.fieldConfig.topLeftXPixel,r=a.y/t.fieldConfig.hightPixelToMeter+t.fieldConfig.topLeftYPixel;e.beginPath(),e.arc(n,r,2,0,2*Math.PI,!1),e.fillStyle="red",e.fill()}))}function ve(e,t,a,n,r,o){e.beginPath(),e.moveTo(t*(a/2)-n,-r/2),e.lineTo(t*(a/2)-n,r/2),e.strokeStyle=o,e.stroke()}var me=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).canvas=ie.a.createRef(),n.onClick=n.onClick.bind(Object(Z.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){fe(this.canvas.current,this.props)}},{key:"componentDidUpdate",value:function(){var e=this.canvas.current;this.props.listenToMouseClicks?e.addEventListener("mousedown",this.onClick):e.removeEventListener("mousedown",this.onClick),fe(e,this.props)}},{key:"onClick",value:function(e){var t=this.canvas.current,a=t.getBoundingClientRect(),n=t.width/a.width,r=t.height/a.height,o=((e.clientX-a.left)*n-this.props.fieldConfig.topLeftXPixel)*this.props.fieldConfig.widthPixelToMeter,i=((e.clientY-a.top)*r-this.props.fieldConfig.topLeftYPixel)*this.props.fieldConfig.hightPixelToMeter;this.props.addWaypoint({x:Number(o.toFixed(3)),y:Number(i.toFixed(3))})}},{key:"render",value:function(){return ie.a.createElement("div",{className:"FieldView"},ie.a.createElement("canvas",{className:"FieldImage",ref:this.canvas,style:{backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:"url("+this.props.filedImageUrl+")"}}))}}]),a}(ie.a.Component),be=Object(n.b)((function(e){return{filedImageUrl:e.imageUrl,fieldConfig:e.fieldConfig,rangePosition:e.rangePosition,path:e.paths[e.selectedPath],robotDrawConfig:e.robotDrawConfig,listenToMouseClicks:e.listenToMouseClicks,isPathInReverse:!!e.paths[e.selectedPath]&&e.paths[e.selectedPath].isReverse()}}),(function(e){return{addWaypoint:function(t){return e(function(e){return{type:"ADD_WAYPOINT",payload:{waypoint:e}}}(t))}}}))(me),ye=a(121),ge=a(120),Pe=a(78),je=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getData=n.getData.bind(Object(Z.a)(n)),n.style={fontSize:20,fontWeight:"bold"},n}return Object(o.a)(a,[{key:"getData",value:function(){return{}}},{key:"getConfigInfo",value:function(){return""}},{key:"getBody",value:function(){return ie.a.createElement("div",null)}},{key:"render",value:function(){return ie.a.createElement("div",null,ie.a.createElement(ge.a,{className:"ml-0 mb-1"},ie.a.createElement("span",{style:this.style},this.getConfigInfo())),ie.a.createElement(ye.a,null,this.getBody()))}}]),a}(ie.a.Component),Ee=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={driveType:E.Tank},n.setDriveTypeTank=n.setDriveTypeTank.bind(Object(Z.a)(n)),n.setDriveTypeSwerve=n.setDriveTypeSwerve.bind(Object(Z.a)(n)),n}return Object(o.a)(a,[{key:"getData",value:function(){return{driveType:this.state.driveType}}},{key:"componentDidMount",value:function(){var e=this;this.props.setElementData("driveType",this.getData),this.setState((function(){return{driveType:e.props.driveType}}))}},{key:"setDriveTypeTank",value:function(){this.setState((function(){return{driveType:E.Tank}}))}},{key:"setDriveTypeSwerve",value:function(){this.setState((function(){return{driveType:E.Swerve}}))}},{key:"getConfigInfo",value:function(){return"Path config:"}},{key:"getBody",value:function(){return ie.a.createElement(ge.a,{className:"mb-3"},ie.a.createElement(Pe.a,null,ie.a.createElement(ne.a,{block:!0,onClick:this.setDriveTypeTank,active:this.state.driveType===E.Tank},"Tank")),ie.a.createElement(Pe.a,null,ie.a.createElement(ne.a,{block:!0,onClick:this.setDriveTypeSwerve,active:this.state.driveType===E.Swerve},"Swerve")))}}]),a}(je),Ce=Object(n.b)((function(e){return{driveType:e.driveType}}),(function(e){return{}}))(Ee),we=a(125),Oe=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={lastProjectPath:""},n.CSVFolderRef=ie.a.createRef(),n.projectFolderRef=ie.a.createRef(),n.resetProjectPath=n.resetProjectPath.bind(Object(Z.a)(n)),n.onProjectFolderPathChange=n.onProjectFolderPathChange.bind(Object(Z.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.setElementData("foldersConfig",this.getData),this.props.setElementData("resetProjectPath",this.resetProjectPath),this.setState((function(){return{lastProjectPath:e.props.projectPath}}))}},{key:"getData",value:function(){return{saveCSVTo:this.CSVFolderRef.current.value||this.props.saveCSVTo,projectPath:this.projectFolderRef.current.value}}},{key:"getConfigInfo",value:function(){return"Folders config:"}},{key:"onProjectFolderPathChange",value:function(){V(this.projectFolderRef.current.value)}},{key:"resetProjectPath",value:function(){this.props.projectPath!==this.state.lastProjectPath&&V(this.state.lastProjectPath)}},{key:"getBody",value:function(){return ie.a.createElement("div",null,ie.a.createElement(we.a.Row,null,ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(we.a.Label,null,"Project folder"),ie.a.createElement(we.a.Control,{defaultValue:this.props.projectPath,ref:this.projectFolderRef,onChange:this.onProjectFolderPathChange}))),ie.a.createElement(we.a.Row,null,ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(we.a.Label,null,"Paths CSV folder:"),ie.a.createElement(we.a.Control,{defaultValue:this.props.saveCSVTo,ref:this.CSVFolderRef}))))}}]),a}(je),ke=Object(n.b)((function(e){return{projectPath:e.projectPath,saveCSVTo:e.saveCSVTo}}),(function(e){return{}}))(Oe),Te=a(126),Re=a(122),Se=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).robotWidthRef=ie.a.createRef(),n.robotLengthRef=ie.a.createRef(),n.robotCenterRef=ie.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.setElementData("robotDrawConfig",this.getData)}},{key:"componentDidUpdate",value:function(){this.robotWidthRef.current.value=this.props.robotDrawConfig.width,this.robotLengthRef.current.value=this.props.robotDrawConfig.length,this.robotCenterRef.current.value=this.props.robotDrawConfig.center}},{key:"getData",value:function(){return{robotDrawConfig:new b(this.robotWidthRef.current.value,this.robotLengthRef.current.value,this.robotCenterRef.current.value)}}},{key:"getConfigInfo",value:function(){return"Robot draw config:"}},{key:"getBody",value:function(){return ie.a.createElement(we.a.Row,null,ie.a.createElement(we.a.Group,{as:Pe.a,md:"4"},ie.a.createElement(Te.a,{overlay:ie.a.createElement(Re.a,null," with bumper ")},ie.a.createElement(we.a.Label,null,"Width")),ie.a.createElement(we.a.Control,{type:"number",ref:this.robotWidthRef,defaultValue:this.props.robotDrawConfig.width})),ie.a.createElement(we.a.Group,{as:Pe.a,md:"4"},ie.a.createElement(Te.a,{overlay:ie.a.createElement(Re.a,null," with bumper ")},ie.a.createElement(we.a.Label,null,"Length")),ie.a.createElement(we.a.Control,{type:"number",ref:this.robotLengthRef,defaultValue:this.props.robotDrawConfig.length})),ie.a.createElement(we.a.Group,{as:Pe.a,md:"4"},ie.a.createElement(Te.a,{overlay:ie.a.createElement(Re.a,null,ie.a.createElement("span",{style:{color:"red"}},"back")," "," (-) < ",ie.a.createElement("span",{style:{color:"rgb(50, 100, 0)"}}," center ")," < (+) "," ",ie.a.createElement("span",{style:{color:"blue"}},"front"))},ie.a.createElement(we.a.Label,null,"Center")),ie.a.createElement(we.a.Control,{type:"number",ref:this.robotCenterRef,defaultValue:this.props.robotDrawConfig.center})))}}]),a}(je),xe=Object(n.b)((function(e){return{robotDrawConfig:e.robotDrawConfig}}),(function(e){return{}}))(Se),Ie=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).fieldHeightInPixelRef=ie.a.createRef(),n.fieldHeightInMeterRef=ie.a.createRef(),n.fieldWidthInPixelRef=ie.a.createRef(),n.fieldWidthInMeterRef=ie.a.createRef(),n.filedImageNameRef=ie.a.createRef(),n.fieldTopLeftXRef=ie.a.createRef(),n.fieldTopLeftYRef=ie.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.setElementData("filedConfig",this.getData)}},{key:"componentDidUpdate",value:function(){this.fieldHeightInMeterRef.current.value=this.props.fieldConfig.heightInMeter,this.fieldWidthInMeterRef.current.value=this.props.fieldConfig.widthInMeter,this.fieldTopLeftXRef.current.value=this.props.fieldConfig.topLeftXPixel,this.fieldTopLeftYRef.current.value=this.props.fieldConfig.topLeftYPixel,this.fieldWidthInPixelRef.current.value=this.props.fieldConfig.widthInPixel,this.fieldHeightInPixelRef.current.value=this.props.fieldConfig.heigthInPixel,this.filedImageNameRef.current.value=this.props.filedImageUrl}},{key:"getData",value:function(){return{image:this.filedImageNameRef.current.value,fieldConfig:new m(this.fieldWidthInMeterRef.current.value,this.fieldHeightInMeterRef.current.value,this.fieldTopLeftXRef.current.value,this.fieldTopLeftYRef.current.value,this.fieldWidthInPixelRef.current.value,this.fieldHeightInPixelRef.current.value)}}},{key:"getConfigInfo",value:function(){return"Filed config:"}},{key:"getBody",value:function(){return ie.a.createElement("div",null,ie.a.createElement(we.a.Row,null,ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(Te.a,{overlay:ie.a.createElement(Re.a,null," In meter ")},ie.a.createElement(we.a.Label,null,"Width")),ie.a.createElement(we.a.Control,{defaultValue:this.props.fieldConfig.widthInMeter,ref:this.fieldWidthInMeterRef,type:"number"})),ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(Te.a,{overlay:ie.a.createElement(Re.a,null," In meter ")},ie.a.createElement(we.a.Label,null,"Height")),ie.a.createElement(we.a.Control,{defaultValue:this.props.fieldConfig.heightInMeter,ref:this.fieldHeightInMeterRef,type:"number"}))),ie.a.createElement(we.a.Row,null,ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(we.a.Label,null,"Image"),ie.a.createElement(we.a.Control,{defaultValue:this.props.filedImageUrl,ref:this.filedImageNameRef}))),ie.a.createElement(we.a.Row,null,ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(we.a.Label,null,"Top left x"),ie.a.createElement(we.a.Control,{defaultValue:this.props.fieldConfig.topLeftXPixel,ref:this.fieldTopLeftXRef,type:"number"})),ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(we.a.Label,null,"Top left y"),ie.a.createElement(we.a.Control,{defaultValue:this.props.fieldConfig.topLeftYPixel,ref:this.fieldTopLeftYRef,type:"number"})),ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(Te.a,{overlay:ie.a.createElement(Re.a,null," In pixel ")},ie.a.createElement(we.a.Label,null,"Width")),ie.a.createElement(we.a.Control,{defaultValue:this.props.fieldConfig.widthInPixel,ref:this.fieldWidthInPixelRef,type:"number"})),ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(Te.a,{overlay:ie.a.createElement(Re.a,null," In pixel ")},ie.a.createElement(we.a.Label,null,"Height")),ie.a.createElement(we.a.Control,{defaultValue:this.props.fieldConfig.heigthInPixel,ref:this.fieldHeightInPixelRef,type:"number"}))))}}]),a}(je),Ne=Object(n.b)((function(e){return{fieldConfig:e.fieldConfig,filedImageUrl:e.image}}),(function(e){return{}}))(Ie),De=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).pathWidthRef=ie.a.createRef(),n.robotMaxVRef=ie.a.createRef(),n.robotMaxAccRef=ie.a.createRef(),n.robotLoopTimeRef=ie.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.setElementData("pathConfig",this.getData)}},{key:"componentDidUpdate",value:function(){this.robotMaxVRef.current.value=this.props.pathConfig.vMax,this.pathWidthRef.current.value=this.props.pathConfig.width,this.robotMaxAccRef.current.value=this.props.pathConfig.acc,this.robotLoopTimeRef.current.value=this.props.pathConfig.robotLoopTime}},{key:"getData",value:function(){return{pathConfig:{vMax:Number(this.robotMaxVRef.current.value),width:Number(this.pathWidthRef.current.value),acc:Number(this.robotMaxAccRef.current.value),robotLoopTime:Number(this.robotLoopTimeRef.current.value)}}}},{key:"getBody",value:function(){return ie.a.createElement(we.a.Row,null,ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(Te.a,{overlay:ie.a.createElement(Re.a,null," m ")},ie.a.createElement(we.a.Label,null,"Width")),ie.a.createElement(we.a.Control,{type:"number",ref:this.pathWidthRef,defaultValue:this.props.pathConfig.width})),ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(Te.a,{overlay:ie.a.createElement(Re.a,null," m / s ")},ie.a.createElement(we.a.Label,null,"Max V")),ie.a.createElement(we.a.Control,{type:"number",ref:this.robotMaxVRef,defaultValue:this.props.pathConfig.vMax})),ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(Te.a,{overlay:ie.a.createElement(Re.a,null," m / s ^ 2 ")},ie.a.createElement(we.a.Label,null,"Max Acc")),ie.a.createElement(we.a.Control,{type:"number",ref:this.robotMaxAccRef,defaultValue:this.props.pathConfig.acc})),ie.a.createElement(we.a.Group,{as:Pe.a},ie.a.createElement(Te.a,{overlay:ie.a.createElement(Re.a,null," s ")},ie.a.createElement(we.a.Label,null,"Loop time")),ie.a.createElement(we.a.Control,{type:"number",ref:this.robotLoopTimeRef,defaultValue:this.props.pathConfig.robotLoopTime})))}}]),a}(je),Me=Object(n.b)((function(e){return{pathConfig:e.pathConfig}}),(function(e){return{}}))(De),Ve=a(123),Le=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).saveSettings=a.saveSettings.bind(Object(Z.a)(a)),a.closeSettings=a.closeSettings.bind(Object(Z.a)(a)),a.getAppVersion=a.getAppVersion.bind(Object(Z.a)(a)),a.setElementData=a.setElementData.bind(Object(Z.a)(a)),a.getUpdateButton=a.getUpdateButton.bind(Object(Z.a)(a)),a.getFoldersConfig=a.getFoldersConfig.bind(Object(Z.a)(a)),a}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(){var e=a(26);this.props.popupsStatus.settingsPopup?e.bind("enter",this.saveSettings):e.unbind("enter")}},{key:"setElementData",value:function(e,t){this[e]=t}},{key:"saveSettings",value:function(){var e=Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)({},this.driveType()),this.pathConfig()),this.filedConfig()),this.robotDrawConfig());this.foldersConfig&&(e=Object.assign(e,this.foldersConfig())),this.props.setSettings(e),this.props.closePopups(),e.image!==this.props.filedImageUrl&&function(e){G.apply(this,arguments)}(e.image)}},{key:"getUpdateButton",value:function(){return void 0!==this.props.newVersion?ie.a.createElement(ne.a,{variant:"outline-success",onClick:Q},"Update to v".concat(this.props.newVersion)):ie.a.createElement("span",null)}},{key:"getAppVersion",value:function(){return this.props.isWeb?ie.a.createElement("span",null):ie.a.createElement("div",{style:{fontSize:10}},"v",this.props.version)}},{key:"getFoldersConfig",value:function(){return this.props.isWeb?ie.a.createElement("span",null):ie.a.createElement(ke,{setElementData:this.setElementData})}},{key:"closeSettings",value:function(){this.resetProjectPath&&this.resetProjectPath(),this.props.closePopups()}},{key:"render",value:function(){return ie.a.createElement(Ve.a,{show:this.props.popupsStatus.settingsPopup,onHide:this.closeSettings,backdrop:"static"},ie.a.createElement(Ve.a.Header,null,ie.a.createElement(Ve.a.Title,null,"Settings")),ie.a.createElement(Ve.a.Body,null,ie.a.createElement("div",{className:"SettingsBody"},this.getFoldersConfig(),ie.a.createElement(Ce,{setElementData:this.setElementData}),ie.a.createElement(Me,{setElementData:this.setElementData}),ie.a.createElement(Ne,{setElementData:this.setElementData}),ie.a.createElement(xe,{setElementData:this.setElementData}),this.getAppVersion())),ie.a.createElement(Ve.a.Footer,null,this.getUpdateButton(),ie.a.createElement(ne.a,{variant:"outline-primary",onClick:this.closeSettings},"cancel"),ie.a.createElement(ne.a,{onClick:this.saveSettings},"save")))}}]),n}(ie.a.Component),We=Object(n.b)((function(e){return{popupsStatus:e.popupsStatus,projectPath:e.projectPath,newVersion:e.newVersion,filedImageUrl:e.image,version:e.version,isWeb:e.isWeb}}),(function(e){return{setSettings:function(t){return e(function(e){return{type:"SET_SETTINGS",payload:{settings:e}}}(t))},closePopups:function(){return e(x())}}}))(Le),Ae=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).range=ie.a.createRef(),n.changeRangePosition=n.changeRangePosition.bind(Object(Z.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.range.current.value=0,this.range.current.disabled=!0,document.querySelector("canvas").addEventListener("wheel",(function(t){return e.changeRangePosition(e.props.rangePosition-Math.sign(t.deltaY))}))}},{key:"componentDidUpdate",value:function(){this.props.path?(this.range.current.max=this.props.path.sourceSetpoints.length-1,this.range.current.value=this.props.rangePosition,this.range.current.disabled=!1):(this.range.current.disabled=!0,this.range.current.value=0)}},{key:"changeRangePosition",value:function(e){if(this.props.path){this.props.setDrawRobotInterval();var t=this.props.rangePosition,a=this.props.path.sourceSetpoints.length-1,n=e>=0&&e<=a?e:t;this.props.changeRangePosition(n)}}},{key:"render",value:function(){var e=this,t={fontSize:"12px"};return ie.a.createElement(ye.a,null,ie.a.createElement(ge.a,null,ie.a.createElement(Pe.a,{sm:.5,style:t},this.props.path?(this.props.robotLoopTime*this.props.rangePosition).toFixed(2):"0.00"),ie.a.createElement(Pe.a,null,ie.a.createElement(we.a.Control,{ref:this.range,type:"range",onChange:function(t){return e.changeRangePosition(t.target.value)}})),ie.a.createElement(Pe.a,{sm:.5,style:t},this.props.path&&!this.props.path.isIllegal()?(Math.sign(this.props.path.sourceSetpoints.length)*(this.props.path.sourceSetpoints.length-1)*this.props.robotLoopTime).toFixed(2):"0.00")))}}]),a}(ie.a.Component),_e=Object(n.b)((function(e){return{rangePosition:e.rangePosition,path:e.paths[e.selectedPath],robotLoopTime:e.pathConfig.robotLoopTime}}),(function(e){return{changeRangePosition:function(t){return e(R(t))},setDrawRobotInterval:function(){return e(S())}}}))(Ae),Ue=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).cancelButtonRef=ie.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;this.props.show&&(void 0!==this.props.refToUse&&null!==this.props.refToUse.current?setTimeout((function(){return e.props.refToUse.current.focus()}),100):null!==this.cancelButtonRef.current&&this.cancelButtonRef.current.focus())}},{key:"render",value:function(){var e=ie.a.createElement(ne.a,{onClick:this.props.confirm},"confirm"),t=ie.a.createElement(ne.a,{variant:"outline-primary",onClick:this.props.close,ref:this.cancelButtonRef},"cancel");return void 0===this.props.confirm&&(e=ie.a.createElement("span",null),t=ie.a.createElement(ne.a,{ref:this.cancelButtonRef,onClick:this.props.close},"ok")),ie.a.createElement(Ve.a,{show:this.props.show,onHide:this.props.close},ie.a.createElement(Ve.a.Header,null,ie.a.createElement(Ve.a.Title,null,this.props.title)),ie.a.createElement(Ve.a.Body,null,this.props.body),ie.a.createElement(Ve.a.Footer,null,t,e))}}]),a}(ie.a.Component),Fe=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).newPathRef=ie.a.createRef(),n.renamePathRef=ie.a.createRef(),n.renamePath=n.renamePath.bind(Object(Z.a)(n)),n.deletePath=n.deletePath.bind(Object(Z.a)(n)),n.createNewPath=n.createNewPath.bind(Object(Z.a)(n)),n}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(){this.props.popupsStatus.renamePathPopup&&(this.renamePathRef.current.defaultValue=this.props.pathName)}},{key:"deletePath",value:function(){this.props.closePopups(),this.props.deletePath()}},{key:"renamePath",value:function(){this.renamePathRef.current.value&&(this.props.renamePath(this.renamePathRef.current.value),this.props.closePopups())}},{key:"createNewPath",value:function(){this.newPathRef.current.value&&!this.props.pathsName.includes(this.newPathRef.current.value)&&(this.props.addPath(this.newPathRef.current.value),this.props.resetRangePosition(),this.props.closePopups())}},{key:"render",value:function(){return ie.a.createElement("div",null,ie.a.createElement(Ue,{show:this.props.popupsStatus.deletePathPopup,body:"Are you sure you want to delete path?",close:this.props.closePopups,confirm:this.deletePath,title:"Delete path"}),ie.a.createElement(Ue,{show:this.props.popupsStatus.renamePathPopup,body:ie.a.createElement(ae.a,{ref:this.renamePathRef}),close:this.props.closePopups,refToUse:this.renamePathRef,confirm:this.renamePath,title:"Rename path"}),ie.a.createElement(Ue,{body:ie.a.createElement(ae.a,{ref:this.newPathRef,placeholder:"Path name"}),show:this.props.popupsStatus.createNewPathPopup,close:this.props.closePopups,confirm:this.createNewPath,refToUse:this.newPathRef,title:"Create a new path"}),ie.a.createElement(Ue,{show:this.props.popupsStatus.pathIsIllegalPopup,title:this.props.path&&this.props.path.isIllegal()?this.props.path.error.info:"",body:ie.a.createElement("div",null,this.props.path&&this.props.path.isIllegal()?"".concat(this.props.path.error.problem,"\n \n").concat(this.props.path.error.solution):""),close:this.props.closePopups}),ie.a.createElement(Ue,{title:"v".concat(this.props.newVersion," is available"),show:this.props.popupsStatus.newVersionPopup,close:this.props.closePopups,body:ie.a.createElement("div",null,"There is a new version waiting for you to update to!\nTo update jest go to settings and click on update...")}),ie.a.createElement(Ue,{show:this.props.popupsStatus.savePathToCSVPopup&&""===this.props.saveCSVTo&&!this.props.isWeb,title:"Save path CSV",body:"Can't save path CSV, you need to set CSV folder path in settings!",close:this.props.closePopups}),ie.a.createElement(Ue,{show:this.props.popupsStatus.savePathToCSVPopup&&""!==this.props.saveCSVTo,title:"Save path CSV",body:"Path CSV saved!",close:this.props.closePopups}))}}]),a}(ie.a.Component),Ge=Object(n.b)((function(e){return{pathName:e.selectedPath?e.selectedPath:"",path:e.paths[e.selectedPath],pathsName:Object.keys(e.paths),popupsStatus:e.popupsStatus,newVersion:e.newVersion,saveCSVTo:e.saveCSVTo,isWeb:e.isWeb}}),(function(e){return{resetRangePosition:function(){return e(R(0))},closePopups:function(){return e(x())},renamePath:function(t){return e(function(e){return{type:"RENAME_PATH",payload:{name:e}}}(t))},addPath:function(t){return e(P(t))},deletePath:function(){return e({type:"DELETE_PATH",payload:{}})}}}))(Fe),He=a(48),Be=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).ref=ie.a.createRef(),a.onClick=a.onClick.bind(Object(Z.a)(a)),a.getButtonIcon=a.getButtonIcon.bind(Object(Z.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){a(26).bind("c",this.onClick)}},{key:"onClick",value:function(){this.ref.current.blur(),this.props.path&&this.props.changeDirection()}},{key:"getButtonIcon",value:function(){return this.props.path&&this.props.isPathReverse?ie.a.createElement(He.a,{className:"mr-2"}):ie.a.createElement(He.b,{className:"mr-2"})}},{key:"render",value:function(){return ie.a.createElement(ne.a,{size:"lg",ref:this.ref,className:"mr-3",onClick:this.onClick,disabled:!this.props.path||this.props.path.isTurnInPlace()},this.getButtonIcon(),"in reverse")}}]),n}(ie.a.Component),Je=Object(n.b)((function(e){return{path:e.paths[e.selectedPath],isPathReverse:!!e.selectedPath&&e.paths[e.selectedPath].isReverse()}}),(function(e){return{changeDirection:function(){return e({type:"CHANGE_DIRECTION",payload:{}})}}}))(Be),Ye=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).ref=ie.a.createRef(),a.onClick=a.onClick.bind(Object(Z.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){a(26).bind("s",this.onClick)}},{key:"onClick",value:function(){this.ref.current.blur(),this.props.path&&(""!==this.props.saveCSVTo||this.props.isWeb)&&(this.props.path.isIllegal()?this.props.showIllegalPathPopup():function(e,t,a){H.apply(this,arguments)}(this.props.path,this.props.pathName,this.props.saveCSVTo))}},{key:"render",value:function(){var e=this.props.path&&this.props.path.isIllegal();return ie.a.createElement(ne.a,{size:"lg",ref:this.ref,className:"mr-3",onClick:this.onClick,disabled:!this.props.path,title:"Save csv path to robot",variant:e?"danger":"primary"},e?ie.a.createElement(re.e,null):ie.a.createElement(He.c,null))}}]),n}(ie.a.Component),Xe=Object(n.b)((function(e){return{isWeb:e.isWeb,saveCSVTo:e.saveCSVTo,pathName:e.selectedPath,path:e.paths[e.selectedPath]}}),(function(e){return{showIllegalPathPopup:function(){return e(x("pathIsIllegalPopup"))}}}))(Ye),ze=a(79),qe=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).ref=ie.a.createRef(),a.onClick=a.onClick.bind(Object(Z.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){a(26).bind("a",this.onClick)}},{key:"onClick",value:function(){this.ref.current.blur(),this.props.path&&this.props.changeListenToMouseStatus()}},{key:"render",value:function(){return ie.a.createElement(ne.a,{size:"lg",ref:this.ref,className:"mr-3",onClick:this.onClick,disabled:!this.props.path,title:"Add waypoint with mouse",variant:this.props.listenToMouseClicks?"success":"primary"},ie.a.createElement(ze.a,null))}}]),n}(ie.a.Component),$e=Object(n.b)((function(e){return{path:e.paths[e.selectedPath],listenToMouseClicks:e.listenToMouseClicks}}),(function(e){return{changeListenToMouseStatus:function(){return e(I())}}}))(qe),Ke=a(124),Qe=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).getPathsItem=a.getPathsItem.bind(Object(Z.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){a(26).bind("n",this.props.showCreateNewPathPopup)}},{key:"getPathsItem",value:function(){var e=this;return this.props.pathsName.map((function(t,a){return ie.a.createElement(Ke.a.Item,{as:"button",key:a,onClick:function(){return e.props.changeSelectedPath(t)}},t)}))}},{key:"render",value:function(){return ie.a.createElement(Ke.a,null,ie.a.createElement(Ke.a.Toggle,{size:"lg"},this.props.pathName?this.props.pathName:"Select Path"),ie.a.createElement(Ke.a.Menu,null,this.getPathsItem(),ie.a.createElement(Ke.a.Divider,null),ie.a.createElement(Ke.a.Item,{as:"button",onClick:this.props.showCreateNewPathPopup},"New path")))}}]),n}(ie.a.Component),Ze=Object(n.b)((function(e){return{pathsName:Object.keys(e.paths),pathName:e.selectedPath}}),(function(e){return{showCreateNewPathPopup:function(){return e(x("createNewPathPopup"))},changeSelectedPath:function(t){return e(function(e){return{type:"CHANGE_SELECTED_PATH",payload:{pathName:e}}}(t))}}}))(Qe),et=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).ref=ie.a.createRef(),a.onClick=a.onClick.bind(Object(Z.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){a(26).bind("d",this.onClick)}},{key:"onClick",value:function(){this.ref.current.blur(),this.props.path&&this.props.showDeletePathPopup()}},{key:"render",value:function(){return ie.a.createElement(ne.a,{size:"lg",ref:this.ref,variant:"danger",className:"mr-3",title:"Delete path",onClick:this.onClick,disabled:!this.props.path},ie.a.createElement(re.c,null))}}]),n}(ie.a.Component),tt=Object(n.b)((function(e){return{path:e.paths[e.selectedPath]}}),(function(e){return{showDeletePathPopup:function(){return e(x("deletePathPopup"))}}}))(et),at=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).ref=ie.a.createRef(),a.onClick=a.onClick.bind(Object(Z.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){a(26).bind("r",this.onClick)}},{key:"onClick",value:function(){this.props.path&&this.props.showRenamePathPopup()}},{key:"render",value:function(){return ie.a.createElement(ne.a,{size:"lg",ref:this.ref,className:"mr-3",title:"Rename path",onClick:this.onClick,disabled:!this.props.path},ie.a.createElement(re.d,null))}}]),n}(ie.a.Component),nt=Object(n.b)((function(e){return{path:e.paths[e.selectedPath]}}),(function(e){return{showRenamePathPopup:function(){return e(x("renamePathPopup"))}}}))(at),rt=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).ref=ie.a.createRef(),a.onClick=a.onClick.bind(Object(Z.a)(a)),a.canCreateInterval=a.canCreateInterval.bind(Object(Z.a)(a)),a.getPlayButtonIcon=a.getPlayButtonIcon.bind(Object(Z.a)(a)),a.updateRangePosition=a.updateRangePosition.bind(Object(Z.a)(a)),a.isRangePositionInTheEnd=a.isRangePositionInTheEnd.bind(Object(Z.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){a(26).bind("space",this.onClick)}},{key:"componentDidUpdate",value:function(){this.ref.current.focus(),this.ref.current.blur()}},{key:"onClick",value:function(){var e=void 0;this.canCreateInterval()&&(this.isRangePositionInTheEnd()&&this.props.changeRangePosition(0),e=setInterval(this.updateRangePosition,1e3*this.props.robotLoopTime)),this.props.setDrawRobotInterval(e)}},{key:"updateRangePosition",value:function(){this.isRangePositionInTheEnd()?this.props.setDrawRobotInterval():this.props.changeRangePosition(this.props.rangePosition+1)}},{key:"canCreateInterval",value:function(){return this.props.path&&!this.props.drawRobotInterval&&!this.props.settingsPopupStatus&&this.props.path.sourceSetpoints.length>0}},{key:"isRangePositionInTheEnd",value:function(){return this.props.path&&this.props.path.sourceSetpoints.length-1===this.props.rangePosition}},{key:"getPlayButtonIcon",value:function(){return this.props.drawRobotInterval?ie.a.createElement(re.f,null):this.isRangePositionInTheEnd()?ie.a.createElement(re.h,null):ie.a.createElement(re.g,null)}},{key:"render",value:function(){return ie.a.createElement(ne.a,{size:"lg",ref:this.ref,className:"mr-3 ml-4",onClick:this.onClick,disabled:!this.props.path||this.props.path.isIllegal()},this.getPlayButtonIcon())}}]),n}(ie.a.Component),ot=Object(n.b)((function(e){return{rangePosition:e.rangePosition,path:e.paths[e.selectedPath],drawRobotInterval:e.drawRobotInterval,robotLoopTime:e.pathConfig.robotLoopTime,settingsPopupStatus:e.popupsStatus.settingsPopup}}),(function(e){return{setDrawRobotInterval:function(t){return e(S(t))},changeRangePosition:function(t){return e(R(t))}}}))(rt),it=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).ref=ie.a.createRef(),a.onClick=a.onClick.bind(Object(Z.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=a(26);e.bind("p",this.onClick),e.bind("esc",this.props.closeSettings)}},{key:"onClick",value:function(){this.ref.current.blur(),this.props.showSettings()}},{key:"render",value:function(){return ie.a.createElement(ne.a,{size:"lg",ref:this.ref,className:"mr-3",title:"Settings",onClick:this.onClick,variant:this.props.newVersion?"success":"primary"},ie.a.createElement(re.b,null))}}]),n}(ie.a.Component),st=Object(n.b)((function(e){return{newVersion:e.newVersion}}),(function(e){return{showSettings:function(){return e(x("settingsPopup"))},closeSettings:function(){return e(x())}}}))(it),ct=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return ie.a.createElement(ye.a,null,ie.a.createElement(ge.a,null,ie.a.createElement($e,null),ie.a.createElement(Xe,null),ie.a.createElement(st,null),ie.a.createElement(Ze,null),ie.a.createElement(ot,null),ie.a.createElement(tt,null),ie.a.createElement(nt,null),ie.a.createElement(Je,null)))}}]),a}(ie.a.Component),lt=Object(n.b)((function(e){return{}}),(function(e){return{}}))(ct),ut=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){!function(e){z.apply(this,arguments)}(this.props.dispatch),function(e){M.apply(this,arguments)}(this.props.dispatch)}},{key:"render",value:function(){return ie.a.createElement("div",{className:"App"},ie.a.createElement(ye.a,{fluid:"md"},ie.a.createElement(Ge,null),ie.a.createElement(We,null),ie.a.createElement(be,null),ie.a.createElement(_e,null),ie.a.createElement(lt,null),ie.a.createElement(he,null)))}}]),a}(ie.a.Component),pt=Object(n.b)((function(e){return{}}),(function(e){return{dispatch:function(t){return e(t)}}}))(ut),ht=a(22),ft=a.n(ht),dt=function e(){Object(r.a)(this,e),this.createNewPathPopup=!1,this.savePathToCSVPopup=!1,this.pathIsIllegalPopup=!1,this.renamePathPopup=!1,this.deletePathPopup=!1,this.newVersionPopup=!1,this.settingsPopup=!1},vt={popupsStatus:new dt,addWaypointInIndex:void 0,drawRobotInterval:void 0,listenToMouseClicks:!1,selectedPath:void 0,rangePosition:0,driveType:E.Tank,paths:{},robotDrawConfig:new b,pathConfig:new E.Tank.PathConfig,fieldConfig:new m,projectPath:"",saveCSVTo:"",imageUrl:"",image:"",newVersion:void 0,version:"0.0.0",isWeb:!0},mt=a(80);function bt(e,t){return function(e){F.apply(this,arguments)}(t.settings),Object(p.a)(Object(p.a)(Object(p.a)({},e),t.settings),{},{selectedPath:void 0})}var yt=a(49);function gt(e,t){return Object(p.a)(Object(p.a)({},e),{},{rangePosition:Number(t.position)})}function Pt(e,t){return!e.drawRobotInterval&&t.interval?Object(p.a)(Object(p.a)({},e),{},{drawRobotInterval:t.interval}):(clearInterval(e.drawRobotInterval),Object(p.a)(Object(p.a)({},e),{},{drawRobotInterval:void 0}))}function jt(e,t){var a=Object(p.a)({},e),n=e.paths[e.selectedPath].waypoints.map((function(a,n){return n!==t.index?a:function(e,t,a,n,r){var o={x:Number.isNaN(a.x)?t.x:a.x,y:Number.isNaN(a.y)?t.y:a.y,v:Number.isNaN(a.v)?t.v:a.v,vMax:Number.isNaN(a.vMax)?t.vMax:a.vMax,angle:Number.isNaN(a.angle)?t.angle:a.angle,robotAngle:Number.isNaN(a.robotAngle)?t.robotAngle:a.robotAngle};return o.x<0&&(o.x=0),o.x>r.widthInMeter&&(o.x=r.widthInMeter),o.y<0&&(o.y=0),o.y>r.heightInMeter&&(o.y=r.heightInMeter),o.v<0&&(o.v=0),o.v>n.vMax&&(o.v=n.vMax),o.vMax<0&&(o.vMax=0),o.vMax>n.vMax&&(o.vMax=n.vMax),void 0===o.robotAngle&&delete o.robotAngle,Object.assign(new e.driveType.Waypoint,o)}(e,a,t.waypoint,e.pathConfig,e.fieldConfig)}));return a.paths[e.selectedPath]=new e.driveType.Path(n,a.pathConfig),e.paths[e.selectedPath].isReverse()&&a.paths[e.selectedPath].changeDirection(),W(e.selectedPath,a.paths[e.selectedPath]),a}function Et(e,t){var a=Object(p.a)(Object(p.a)({},e),{},{listenToMouseClicks:!1});return delete a.paths[e.selectedPath],a.selectedPath=void 0,function(e,t){_.apply(this,arguments)}(e.selectedPath,e.saveCSVTo),a}function Ct(e,t){var a=Object(p.a)(Object(p.a)({},e),{},{selectedPath:t.name});return t.name!==e.selectedPath&&(a.paths[t.name]=a.paths[e.selectedPath],delete a.paths[e.selectedPath],function(e,t){U.apply(this,arguments)}(e.selectedPath,t.name)),a}var wt=Object(mt.a)(vt,(function(e,t){return"SET_DRAW_ROBOT_INTERVAL"!==t.type&&"CHANGE_RANGE_POSITION"!==t.type&&(e=gt(e=Pt(e,{}),{position:0})),"CHANGE_POPUPS_STATUS"===t.type?function(e,t){var a=Object(p.a)(Object(p.a)({},e),{},{popupsStatus:new dt});return void 0!==t.popup&&(a.popupsStatus[t.popup]=!e.popupsStatus[t.popup]),a}(e,t.payload):"CHANGE_RANGE_POSITION"===t.type?gt(e,t.payload):"SET_DRAW_ROBOT_INTERVAL"===t.type?Pt(e,t.payload):"CHANGE_LISTEN_TO_MOUSE_STATUS"===t.type?function(e,t){var a=void 0!==e.addWaypointInIndex?void 0:t.index,n=void 0!==t.index||!e.listenToMouseClicks;return Object(p.a)(Object(p.a)({},e),{},{listenToMouseClicks:n,addWaypointInIndex:a})}(e,t.payload):e}),(function(e,t){return"ADD_PATH"===t.type?function(e,t){var a=Object(p.a)({},e),n=[];return t.waypoints&&t.waypoints.forEach((function(t){n.push(Object.assign(new e.driveType.Waypoint,t))})),a.paths[t.name]=new e.driveType.Path(n,e.pathConfig),t.isInReverse&&a.paths[t.name].changeDirection(),a.selectedPath=t.waypoints?void 0:t.name,t.waypoints||W(t.name,a.paths[t.name]),a}(e,t.payload):"RENAME_PATH"===t.type?Ct(e,t.payload):"DELETE_PATH"===t.type?Et(e,t.payload):"ADD_WAYPOINT"===t.type?function(e,t){var a=[],n=Object(p.a)({},t.waypoint),r=Object.assign(new e.driveType.Waypoint,n);e.paths[e.selectedPath].waypoints.forEach((function(t,n){a.push(t),n===e.addWaypointInIndex&&a.push(r)})),void 0===e.addWaypointInIndex&&a.push(r);var o=Object(p.a)(Object(p.a)({},e),{},{addWaypointInIndex:void 0});return o.paths[e.selectedPath]=new e.driveType.Path(a,e.pathConfig),void 0!==e.addWaypointInIndex&&(o.listenToMouseClicks=!1),e.paths[e.selectedPath].isReverse()&&o.paths[e.selectedPath].changeDirection(),W(e.selectedPath,o.paths[e.selectedPath]),o}(e,t.payload):"SET_WAYPOINT"===t.type?jt(e,t.payload):"SET_PATH_CONFIG"===t.type?function(e,t){var a=Object.assign(new e.driveType.PathConfig,t.pathConfig),n=Object(p.a)(Object(p.a)({},e),{},{pathConfig:a});return t.driveType&&(n.driveType=t.driveType),n}(e,t.payload):"REMOVE_WAYPOINT"===t.type?function(e,t){var a=[],n=Object(p.a)({},e);return e.paths[e.selectedPath].waypoints.forEach((function(e,n){n!==t.index&&a.push(e)})),n.paths[e.selectedPath]=new e.driveType.Path(a,n.pathConfig),e.paths[e.selectedPath].isReverse()&&n.paths[e.selectedPath].changeDirection(),W(e.selectedPath,n.paths[e.selectedPath]),n}(e,t.payload):"CHANGE_DIRECTION"===t.type?function(e,t){var a=Object(p.a)({},e);return a.paths[e.selectedPath].changeDirection(),W(e.selectedPath,a.paths[e.selectedPath]),a}(e,t.payload):"CHANGE_SELECTED_PATH"===t.type?function(e,t){var a=e.paths[t.pathName],n=Object(p.a)(Object(p.a)({},e),{},{selectedPath:t.pathName});return n.paths[t.pathName]=new e.driveType.Path(a.waypoints,e.pathConfig),a.isReverse()&&n.paths[t.pathName].changeDirection(),n}(e,t.payload):e}),(function(e,t){return"SET_IMAGE"===t.type?function(e,t){return Object(p.a)(Object(p.a)({},e),{},{image:t.image,imageUrl:t.imageUrl})}(e,t.payload):"SET_CSV_PATH"===t.type?function(e,t){return Object(p.a)(Object(p.a)({},e),{},{saveCSVTo:t.path})}(e,t.payload):"SET_SETTINGS"===t.type?bt(e,t.payload):"SET_PROJECT_PATH"===t.type?function(e,t){return Object(p.a)(Object(p.a)({},e),{},{projectPath:t.projectPath,selectedPath:void 0,paths:{}})}(e,t.payload):"SET_FIELD_CONFIG"===t.type?function(e,t){return Object(p.a)(Object(p.a)({},e),{},{fieldConfig:t.fieldConfig})}(e,t.payload):"SET_ROBOT_DRAW_CONFIG"===t.type?function(e,t){return Object(p.a)(Object(p.a)({},e),{},{robotDrawConfig:t.robotDrawConfig})}(e,t.payload):e}),(function(e,t){return"SET_PLATFORM"===t.type?function(e,t){return Object(p.a)(Object(p.a)({},e),{},{isWeb:t.isWeb})}(e,t.payload):"SET_APP_VERSION"===t.type?function(e,t){return Object(p.a)(Object(p.a)({},e),{},{version:t.version})}(e,t.payload):"SET_NEW_VERSION"===t.type?function(e,t){var a=Object(p.a)(Object(p.a)({},e),{},{newVersion:t.version,popupsStatus:new dt});return a.popupsStatus.newVersionPopup=!0,a}(e,t.payload):e}));var Ot=Object(yt.b)(wt);a(112);ft.a.render(ie.a.createElement(n.a,{store:Ot},ie.a.createElement(pt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){e.exports=a(113)}},[[81,1,2]]]);
//# sourceMappingURL=main.95ac0ae3.chunk.js.map